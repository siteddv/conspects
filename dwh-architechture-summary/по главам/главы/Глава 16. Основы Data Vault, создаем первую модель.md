# Глава 16. Основы Data Vault, создаем первую модель

Шестнадцатая глава курса посвящена изучению методологии Data Vault — современного подхода к моделированию хранилищ данных, разработанного Дэном Линстедтом в 2000 году для Министерства обороны США. Рассматриваются основы Data Vault, структура модели, сравнение с другими методологиями.

Data Vault решает проблемы традиционных моделей: Кимбалл не справляется со сложными связями "многие ко многим", Инмон слишком сложен в поддержке, оба подхода плохо работают с изменениями в источниках данных. Ключевая особенность Data Vault — максимальная устойчивость к изменениям: если структура источника изменяется, можно добавлять новые данные без изменения существующей структуры.

Структура Data Vault состоит из трех основных типов таблиц: Hubs (хабы) — основные бизнес-сущности с неизменяемыми ключами, содержащие суррогатные ключи (Hash Key), бизнес-ключи из источника, дату загрузки и источник данных; Links (линки) — связи между сущностями через их ключи; Satellites (сателлиты) — атрибуты и их изменения во времени, поддерживающие историчность через даты начала и окончания действия.

Историчность в Data Vault обеспечивается сателлитами, которые хранят все версии атрибутов. При изменении атрибута создается новая запись в сателлите с новой датой начала действия. Старые записи остаются в базе для исторического анализа. Используются поля Last Seen Date для определения удаленных данных, Hash Diff для определения изменений и Record Source для отслеживания источника данных.

Рассматривается проектирование хранилища Data Vault в UML: определение ключевых бизнес-сущностей (Hub), определение связей между сущностями (Link), определение атрибутов (Satellite), построение ER-диаграммы. Программирование Data Vault включает создание процедур для загрузки данных в хабы, линки и сателлиты, проверку существования записей, создание новых при необходимости, обновление сателлитов при изменениях.

Важно, что данные в Data Vault не удаляются, что обеспечивает полную историчность и возможность восстановления данных. Data Vault поддерживает реал-тайм аналитику через возможность загрузки данных в реальном времени. Изменения в структуре источников не ломают хранилище, так как новые атрибуты добавляются в сателлиты без изменения структуры хабов и линков.

---

**Подробнее:** [[Глава 16. Основы Data Vault, создаем первую модель]] [Глава 16. Основы Data Vault, создаем первую модель](../полный/Глава 16. Основы Data Vault, создаем первую модель/Глава 16. Основы Data Vault, создаем первую модель.md)

