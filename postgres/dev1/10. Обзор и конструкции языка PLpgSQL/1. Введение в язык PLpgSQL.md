### **–ö–æ–Ω—Å–ø–µ–∫—Ç –≤–∏–¥–µ–æ: –ß–∞—Å—Ç—å 1 ‚Äì –í–≤–µ–¥–µ–Ω–∏–µ –≤ —è–∑—ã–∫ PL/pgSQL**

---

#### **1.1. –ò—Å—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∏—è PL/pgSQL**

- **–ì–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è**: 1998
- **–í–∫–ª—é—á–µ–Ω–∏–µ –≤ PostgreSQL**: –° –≤–µ—Ä—Å–∏–∏ 9.0 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- **–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ —Å–æ–∑–¥–∞–Ω–∏—è**:
    - –î–æ –ø–æ—è–≤–ª–µ–Ω–∏—è PL/pgSQL –≤ PostgreSQL –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ —è–∑—ã–∫–µ **C**.
    - C ‚Äî –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —è–∑—ã–∫, —Å–ª–æ–∂–Ω—ã–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö.
    - –¢—Ä–µ–±–æ–≤–∞–ª—Å—è **–ø—Ä–æ—Å—Ç–æ–π, —É–¥–æ–±–Ω—ã–π —è–∑—ã–∫** –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞.

---

#### **1.2. –¶–µ–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ PL/pgSQL**

- –°–æ–∑–¥–∞—Ç—å —è–∑—ã–∫, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç **–ø—Ä–æ—â–µ, —á–µ–º C**, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º **–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ—â–Ω—ã–º**.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **—É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π** (—É—Å–ª–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, —Ü–∏–∫–ª—ã).
- –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö PostgreSQL.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å —Ö—Ä–∞–Ω–∏–º—ã–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏.

---

#### **1.3. –û—Ç–ª–∏—á–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤**

- **PL/pgSQL** –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —è–∑—ã–∫–µ **PL/SQL (Oracle)**.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –±–ª–æ–∫–∏**, –∫–∞–∫ –≤ **Ada** –∏ **Pascal**.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å **—Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã** –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞.
- –û—Ç–ª–∏—á–∏–µ –æ—Ç **SQL**:
    - SQL –≤—ã–ø–æ–ª–Ω—è–µ—Ç **–µ–¥–∏–Ω–∏—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**.
    - PL/pgSQL **—Ä–∞—Å—à–∏—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ SQL**, –¥–æ–±–∞–≤–ª—è—è **–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —É—Å–ª–æ–≤–∏—è, —Ü–∏–∫–ª—ã**.
    - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** (`EXCEPTION`).

---

#### **1.4. –ê–Ω–∞–ª–æ–≥–∏—è —Å PL/SQL (Oracle)**

- **PL/pgSQL** —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–ª—Å—è —Å —É—á–µ—Ç–æ–º **PL/SQL** (Oracle).
- **–°–∏–Ω—Ç–∞–∫—Å–∏—Å —Å—Ö–æ–∂**: `BEGIN ... END`, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∏—Å–∫–ª—é—á–µ–Ω–∏—è.
- **–†–∞–∑–ª–∏—á–∏–µ**:
    - –í PostgreSQL —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–∞—â–µ, —á–µ–º –ø—Ä–æ—Ü–µ–¥—É—Ä—ã.
    - –í Oracle –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∑–Ω–∞—á–µ–Ω–∏–π (`PROCEDURE`).
    - –í PL/pgSQL –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `FUNCTION`, –Ω–æ –µ—Å—Ç—å RETURN VOID –¥–ª—è –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è.

---

#### **1.5. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ –Ω–∞ PL/pgSQL**

**–û—Å–Ω–æ–≤–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –∫–æ–¥–∞ ‚Äî –±–ª–æ–∫ PL/pgSQL.**  
–ö–∞–∂–¥—ã–π –±–ª–æ–∫ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö —á–∞—Å—Ç–µ–π:

1. **–°–µ–∫—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (`DECLARE`)**
2. **–°–µ–∫—Ü–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (`BEGIN ... END`)**
3. **–°–µ–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (`EXCEPTION`)** _(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è)_

–ü—Ä–∏–º–µ—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –±–ª–æ–∫–∞ –∫–æ–¥–∞:

```sql
DO $$
BEGIN
  RAISE NOTICE 'Hello, PL/pgSQL!';
END $$;
```

- **`DO $$ ... $$`** ‚Äì –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –±–ª–æ–∫–∞ PL/pgSQL.
- **`BEGIN ... END`** ‚Äì –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π –±–ª–æ–∫.
- **`RAISE NOTICE`** ‚Äì –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª–æ–≥.

---

‚è≠ **–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å** ‚Äì **–ë–ª–æ–∫–∏ –∫–æ–¥–∞ –≤ PL/pgSQL** (–∞–Ω–æ–Ω–∏–º–Ω—ã–µ –±–ª–æ–∫–∏, –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫). –ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? üöÄ