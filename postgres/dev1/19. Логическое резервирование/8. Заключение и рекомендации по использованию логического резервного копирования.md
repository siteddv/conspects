### 8. **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Ä–µ–∑–µ—Ä–≤–Ω–æ–º—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é**

–õ–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ PostgreSQL ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≥–∏–±–∫–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤—É —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –∫–æ–ø–∏—è–º–∏.

---

## **1. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è**

|–ú–µ—Ç–æ–¥|–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?|–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞|–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏|
|---|---|---|---|
|`COPY ... TO`|–ë—ã—Å—Ç—Ä–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã|–ü—Ä–æ—Å—Ç–æ–π, –ª–µ–≥–∫–æ —á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç|–ü–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü|
|`pg_dump -F p` (SQL)|–î–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏|–ß–∏—Ç–∞–µ–º—ã–π, –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å|–ú–µ–¥–ª–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ|
|`pg_dump -F c` (custom)|–ì–∏–±–∫–æ—Å—Ç—å –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏|–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±–∏—Ä–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã|–ù–µ —á–∏—Ç–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é|
|`pg_dump -F d` (directory)|–ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ|–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ|–¢—Ä–µ–±—É–µ—Ç `pg_restore`|
|`pg_dumpall`|–ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –∫–ª–∞—Å—Ç–µ—Ä–∞|–ö–æ–ø–∏—Ä—É–µ—Ç —Ä–æ–ª–∏ –∏ –±–∞–∑—ã|–î–æ–ª–≥–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è|

---

## **2. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**

‚úÖ **–ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏** ‚Äì –ø–µ—Ä–µ–Ω–æ—Å –±–∞–∑—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –∏–ª–∏ –≤–µ—Ä—Å–∏—è–º–∏ PostgreSQL.  
‚úÖ **–î–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è** ‚Äì –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ —Å—Ö–µ–º—ã.  
‚úÖ **–î–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±—ç–∫–∞–ø–æ–≤** ‚Äì SQL-–¥–∞–º–ø—ã –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º.  
‚úÖ **–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ** ‚Äì —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–ª–µ–∑–Ω—ã –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.

‚ùå **–ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äì –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–±–æ–µ–≤ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** (`pg_basebackup`).

---

## **3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–º—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é**

### **üöÄ –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø—ã –±—ã—Å—Ç—Ä–µ–µ**

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Ñ–æ—Ä–º–∞—Ç `directory` (`-F d -j N`)** –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.
- –û—Ç–∫–ª—é—á–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –¥–∞–Ω–Ω—ã—Ö (`pg_restore --no-indexes`).
- –†–∞–∑–±–∏–≤–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ **–ø–∞—Ä—Ç–∏—Ü–∏–∏**, –µ—Å–ª–∏ –æ–Ω–∏ –±–æ–ª—å—à–∏–µ.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∂–∞—Ç–∏–µ:
    
    ```sh
    pg_dump -U postgres -d mydb | gzip > backup.sql.gz
    ```
    

### **üõ° –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö**

- **–•—Ä–∞–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ø–∏–π –±—ç–∫–∞–ø–æ–≤** –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é (cron, scripts, backup tools)**.
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ **–ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ, –º–æ–∂–Ω–æ –ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—ç–∫–∞–ø**.

### **üìå –ö–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±—ã—Å—Ç—Ä–µ–µ**

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **`pg_restore -j N`**, —á—Ç–æ–±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤.
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ **—Å–Ω–∞—á–∞–ª–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É**, –∑–∞—Ç–µ–º –¥–∞–Ω–Ω—ã–µ (`--schema-only`, `--data-only`).
- –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –±—ç–∫–∞–ø **–±–µ–∑ `ALTER OWNER`**, –µ—Å–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä:
    
    ```sh
    pg_dump -U postgres --no-owner -F c -f backup.dump
    ```
    

---

## **4. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è**

–ß—Ç–æ–±—ã –¥–µ–ª–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π:

```sh
#!/bin/bash
backup_dir="/backups"
db_name="mydb"
pg_dump -U postgres -F c -f "$backup_dir/backup_$(date +\%F).dump"
find $backup_dir -type f -mtime +7 -delete
```

–î–æ–±–∞–≤–ª—è–µ–º –≤ `cron`:

```sh
0 2 * * * /path/to/backup_script.sh
```

–ë—ç–∫–∞–ø –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è **–∫–∞–∂–¥—É—é –Ω–æ—á—å –≤ 2:00**, –∞ —Å—Ç–∞—Ä—ã–µ –∫–æ–ø–∏–∏ —É–¥–∞–ª—è—Ç—å—Å—è.

---

## **5. –ò—Ç–æ–≥**

- **–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —á–∏—Ç–∞–µ–º–∞—è –∫–æ–ø–∏—è** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `pg_dump -F p` (SQL-—Å–∫—Ä–∏–ø—Ç).
- **–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `pg_dump -F c` (custom).
- **–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `pg_dump -F d -j N`.
- **–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø —Å–µ—Ä–≤–µ—Ä–∞** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `pg_dumpall`.

–õ–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –Ω–æ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–±–æ–µ–≤ –µ–≥–æ **–Ω—É–∂–Ω–æ –¥–æ–ø–æ–ª–Ω—è—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º**.

---

–≠—Ç–æ –±—ã–ª –ø–æ–ª–Ω—ã–π —Ä–∞–∑–±–æ—Ä –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ PostgreSQL. üéØ  
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å —á—Ç–æ-—Ç–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ! üòä