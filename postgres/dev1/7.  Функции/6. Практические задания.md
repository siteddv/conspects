### **–ö–æ–Ω—Å–ø–µ–∫—Ç —à–µ—Å—Ç–æ–π –ª–æ–≥–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç–∏: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è**

---

### **1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –∫–Ω–∏–∂–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞**

–í —ç—Ç–æ–º –∑–∞–¥–∞–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∫–Ω–∏–∂–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞.

#### **–§—É–Ω–∫—Ü–∏—è `author_name` ‚Äì –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏ –∞–≤—Ç–æ—Ä–∞**

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞:

- –ü—Ä–∏–Ω–∏–º–∞—Ç—å **—Ç—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞**: —Ñ–∞–º–∏–ª–∏—é (`last_name`), –∏–º—è (`first_name`), –æ—Ç—á–µ—Å—Ç–≤–æ (`middle_name`).
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç—Ä–æ–∫—É —Å **—Ñ–∞–º–∏–ª–∏–µ–π –∏ –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏**.

##### **–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

```sql
CREATE FUNCTION author_name(last_name text, first_name text, middle_name text) 
RETURNS text 
AS $$
  SELECT last_name || ' ' || LEFT(first_name, 1) || '.' || LEFT(middle_name, 1) || '.';
$$ LANGUAGE sql IMMUTABLE;
```

##### **–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞**

```sql
SELECT author_name('–¢–æ–ª—Å—Ç–æ–π', '–õ–µ–≤', '–ù–∏–∫–æ–ª–∞–µ–≤–∏—á');
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
 –¢–æ–ª—Å—Ç–æ–π –õ.–ù.
```

##### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏**

- –í –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ `author_list` –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É –≤—ã–≤–æ–¥–∞ –§–ò–û –∞–≤—Ç–æ—Ä–æ–≤ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é `author_name`:
    
    ```sql
    CREATE VIEW author_list AS 
    SELECT author_id, author_name(last_name, first_name, middle_name) AS full_name 
    FROM authors;
    ```
    
    –¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ `author_list`, **—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**.

---

#### **–§—É–Ω–∫—Ü–∏—è `book_name` ‚Äì –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–Ω–∏–≥–∏**

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞:

- –ü—Ä–∏–Ω–∏–º–∞—Ç—å **–¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞**: ID –∫–Ω–∏–≥–∏ –∏ –µ—ë –∑–∞–≥–æ–ª–æ–≤–æ–∫.
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç—Ä–æ–∫—É —Å **–Ω–∞–∑–≤–∞–Ω–∏–µ–º –∫–Ω–∏–≥–∏ + —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤**.

##### **–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

```sql
CREATE FUNCTION book_name(book_id int, title text) RETURNS text 
AS $$
  SELECT title || ' (' || STRING_AGG(author_name(a.last_name, a.first_name, a.middle_name), ', ') || ')'
  FROM authors a
  JOIN book_authors ba ON a.author_id = ba.author_id
  WHERE ba.book_id = book_id;
$$ LANGUAGE sql STABLE;
```

##### **–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞**

```sql
SELECT book_name(1, '–í–æ–π–Ω–∞ –∏ –º–∏—Ä');
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
 –í–æ–π–Ω–∞ –∏ –º–∏—Ä (–¢–æ–ª—Å—Ç–æ–π –õ.–ù.)
```

##### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏**

- –í –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ `catalog` –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–Ω–∏–≥:
    
    ```sql
    CREATE VIEW catalog AS 
    SELECT book_id, book_name(book_id, title) AS full_title 
    FROM books;
    ```
    
    –¢–µ–ø–µ—Ä—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫–Ω–∏–≥ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è —Å –∏–º–µ–Ω–∞–º–∏ –∞–≤—Ç–æ—Ä–æ–≤**.

---

### **2. –ù–∞–ø–∏—Å–∞–Ω–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**

–í —ç—Ç–∏—Ö –∑–∞–¥–∞–Ω–∏—è—Ö –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö.

#### **–§—É–Ω–∫—Ü–∏—è `random_time` ‚Äì –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ**

–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞:

- –ü—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ (`start_time`) –∏ –∫–æ–Ω–µ—á–Ω–æ–µ (`end_time`) –≤—Ä–µ–º—è.
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ –≤—Ä–µ–º—è –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ.

##### **–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

```sql
CREATE FUNCTION random_time(start_time time, end_time time) RETURNS time 
AS $$
  SELECT start_time + (random() * (end_time - start_time))::interval;
$$ LANGUAGE sql IMMUTABLE;
```

##### **–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞**

```sql
SELECT random_time('08:00:00', '20:00:00');
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç (–ø—Ä–∏–º–µ—Ä–Ω—ã–π):**

```
 14:32:45
```

---

#### **–§—É–Ω–∫—Ü–∏—è `normalize_license_plate` ‚Äì –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤**

–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞:

- –ü—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–æ–º–µ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è (`plate`) –≤ **–ª—é–±–æ–º —Ñ–æ—Ä–º–∞—Ç–µ**.
- –ü—Ä–∏–≤–æ–¥–∏—Ç—å –µ–≥–æ –∫ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –≤–∏–¥—É** (—É–±–∏—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã, –ø—Ä–∏–≤–æ–¥–∏—Ç—å –±—É–∫–≤—ã –∫ –≤–µ—Ä—Ö–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É).

##### **–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

```sql
CREATE FUNCTION normalize_license_plate(plate text) RETURNS text 
AS $$
  SELECT UPPER(REGEXP_REPLACE(plate, '\s+', '', 'g'));
$$ LANGUAGE sql IMMUTABLE;
```

##### **–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞**

```sql
SELECT normalize_license_plate(' –∞123 –≤–º 177 ');
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
 –ê123–í–ú177
```

---

#### **–§—É–Ω–∫—Ü–∏—è `solve_quadratic` ‚Äì –ù–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –∫–æ—Ä–Ω–µ–π –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–≥–æ —É—Ä–∞–≤–Ω–µ–Ω–∏—è**

–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞:

- –ü—Ä–∏–Ω–∏–º–∞—Ç—å **—Ç—Ä–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞** `a`, `b`, `c`.
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å **–¥–≤–∞ –∫–æ—Ä–Ω—è —É—Ä–∞–≤–Ω–µ–Ω–∏—è** (–µ—Å–ª–∏ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç).

##### **–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

```sql
CREATE FUNCTION solve_quadratic(a double precision, b double precision, c double precision) 
RETURNS TABLE(root1 double precision, root2 double precision) 
AS $$
  DECLARE
    d double precision := b * b - 4 * a * c;
  BEGIN
    IF d < 0 THEN
      RETURN;
    ELSIF d = 0 THEN
      RETURN QUERY SELECT -b / (2 * a), NULL;
    ELSE
      RETURN QUERY 
        SELECT (-b + sqrt(d)) / (2 * a), (-b - sqrt(d)) / (2 * a);
    END IF;
  END;
$$ LANGUAGE plpgsql;
```

##### **–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞**

```sql
SELECT * FROM solve_quadratic(1, -3, 2);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
 root1 | root2
-------+------
     2 |    1
```

---

### **–í—ã–≤–æ–¥—ã –ø–æ —à–µ—Å—Ç–æ–π —á–∞—Å—Ç–∏**

1. **–°–æ–∑–¥–∞–Ω—ã –¥–≤–µ –ø–æ–ª–µ–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–∏–∂–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ (`author_name` –∏ `book_name`)**, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ.
2. **–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
    - `random_time` ‚Äì —Å–æ–∑–¥–∞—ë—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –≤—Ä–µ–º—è –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ.
    - `normalize_license_plate` ‚Äì –ø—Ä–∏–≤–æ–¥–∏—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –≤–∏–¥—É.
    - `solve_quadratic` ‚Äì —Ä–µ—à–∞–µ—Ç –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è.
3. **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–∑–º–µ–Ω—á–∏–≤–æ—Å—Ç–∏ (`IMMUTABLE`, `STABLE`) –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.**
4. **–§—É–Ω–∫—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (`author_list`, `catalog`)**, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–º.

---

### **–ß—Ç–æ –¥–∞–ª—å—à–µ?**

–≠—Ç–æ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å —Ä–∞–∑–±–æ—Ä–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∏–∑ –≤–∏–¥–µ–æ. –ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ —á—Ç–æ-—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è **Obsidian**, –∏–ª–∏ —Ä–∞–∑–æ–±—Ä–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ, –¥–∞–π –∑–Ω–∞—Ç—å! üòä