### **–ü–µ—Ä–µ—Å–∫–∞–∑ 2-–π —á–∞—Å—Ç–∏: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä –≤ PostgreSQL**

---

### **1. –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä**

–í —ç—Ç–æ–π —á–∞—Å—Ç–∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è:

- –ö–∞–∫ –æ–±—ä—è–≤–ª—è—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤ **PostgreSQL**.
- –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Ö **–≤—ã–∑–≤–∞—Ç—å**.
- –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏ –∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏.

---

### **2. –°–∏–Ω—Ç–∞–∫—Å–∏—Å –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã**

–í **PostgreSQL** –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `CREATE PROCEDURE`, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```sql
CREATE PROCEDURE my_proc()
LANGUAGE SQL
AS $$
    TRUNCATE TABLE my_table;
    INSERT INTO my_table VALUES (generate_series(1,3));
$$;
```

–†–∞–∑–±–æ—Ä –∫–æ–¥–∞:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `CREATE PROCEDURE`, –∞ –Ω–µ `CREATE FUNCTION`.
- –Ø–∑—ã–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `LANGUAGE SQL` (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `PL/pgSQL`).
- –í–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ `AS $$ ... $$` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã.
- **–¢–µ–ª–æ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ SQL-–æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤**.

---

### **3. –ö–∞–∫ –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É?**

–ü—Ä–æ—Ü–µ–¥—É—Ä—ã –≤ PostgreSQL **–Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `SELECT`**, –∏—Ö –≤—ã–∑—ã–≤–∞—é—Ç –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä `CALL`:

```sql
CALL my_proc();
```

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ:

- –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ **–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç** –∑–Ω–∞—á–µ–Ω–∏–µ.
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ —Ç–µ–ª–µ.
- –ú–æ–∂–µ—Ç **–∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö**.

---

### **4. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π**

–ï—Å–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞—Ç—å **—Ñ—É–Ω–∫—Ü–∏—é —Å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –∫–æ–¥–æ–º**, –æ–Ω–∞ **–Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å**:

```sql
CREATE FUNCTION my_func() RETURNS void
LANGUAGE SQL
AS $$
    TRUNCATE TABLE my_table;
    INSERT INTO my_table VALUES (generate_series(1,3));
$$;
```

–ü–æ—á–µ–º—É?

- **–§—É–Ω–∫—Ü–∏–∏ –Ω–µ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å `TRUNCATE`**, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ **DDL-–æ–ø–µ—Ä–∞—Ç–æ—Ä, –∏–∑–º–µ–Ω—è—é—â–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î**.
- **–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ** (–¥–∞–∂–µ `void`).
- –§—É–Ω–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∑–∞–ø—Ä–æ—Å–æ–≤: `SELECT my_func();`, –∞ –Ω–µ `CALL`.

---

### **5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä**

‚úÖ **–ü—Ä–æ—Ü–µ–¥—É—Ä—ã –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**

- –ú–æ–≥—É—Ç **–∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ** (`INSERT`, `UPDATE`, `DELETE`).
- –ú–æ–≥—É—Ç **–≤—ã–∑—ã–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã**.
- –ú–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ü–∏–∫–ª—ã –∏ —É—Å–ª–æ–≤–∏—è** (–≤ `PL/pgSQL`).

‚ùå **–ü—Ä–æ—Ü–µ–¥—É—Ä—ã –Ω–µ –º–æ–≥—É—Ç:**

- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞–ø—Ä—è–º—É—é (`RETURN` –¥–ª—è –Ω–∏—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω).
- –ë—ã—Ç—å –≤—ã–∑–≤–∞–Ω–Ω—ã–º–∏ –≤ `SELECT`.

---

### **6. –ü—Ä–∏–º–µ—Ä —Å–ª–æ–∂–Ω–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä—ã**

–î–æ–ø—É—Å—Ç–∏–º, –º—ã —Ö–æ—Ç–∏–º **–æ—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É**, –∑–∞—Ç–µ–º **–¥–æ–±–∞–≤–∏—Ç—å N —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π**.

```sql
CREATE PROCEDURE fill_table(n INT)
LANGUAGE SQL
AS $$
    TRUNCATE TABLE my_table;
    INSERT INTO my_table (value) 
    SELECT generate_series(1, n);
$$;
```

- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `n` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏).
- **–û—á–∏—â–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö**.
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∞–∫:**
    
    ```sql
    CALL fill_table(5);
    ```
    
    –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ –≤ `my_table` –±—É–¥–µ—Ç **5 —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**.

---

### **–í—ã–≤–æ–¥—ã –≤—Ç–æ—Ä–æ–π —á–∞—Å—Ç–∏**

- **–ü—Ä–æ—Ü–µ–¥—É—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `CREATE PROCEDURE`, –∞ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `CALL`.**
- –û–Ω–∏ –º–æ–≥—É—Ç **–∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î**, –Ω–æ **–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è** –Ω–∞–ø—Ä—è–º—É—é.
- **–§—É–Ω–∫—Ü–∏–∏ –Ω–µ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –∏ DDL-–æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ (`TRUNCATE`, `ALTER TABLE`).**
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–π** –≤ PostgreSQL.

---

–ì–æ—Ç–æ–≤ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ? –í **—Ç—Ä–µ—Ç—å–µ–π —á–∞—Å—Ç–∏** –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ **–æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏**, —Ä–∞–±–æ—Ç–∞ —Å `IN`, `OUT`, `INOUT` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –ø—Ä–∏–º–µ—Ä—ã —Å–ª–æ–∂–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤. üöÄ