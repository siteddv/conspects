### **–ö–æ–Ω—Å–ø–µ–∫—Ç: –°–ø–æ—Å–æ–±—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥**

–í PostgreSQL –∏ –¥—Ä—É–≥–∏—Ö –°–£–ë–î —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö SQL-–∫–æ–º–∞–Ω–¥. –í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:

- –ù—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å? ‚Üí `EXECUTE`
- –ù—É–∂–Ω–æ –∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ —Å—Ç—Ä–æ–∫–∞–º? ‚Üí `FOR ... IN EXECUTE`
- –ù—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –∫—É—Ä—Å–æ—Ä? ‚Üí `OPEN CURSOR`
- –ù—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏? ‚Üí `RETURN QUERY EXECUTE`

---

## **1. `EXECUTE` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö SQL-–∫–æ–º–∞–Ω–¥**

–û–ø–µ—Ä–∞—Ç–æ—Ä `EXECUTE` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é SQL-–∑–∞–ø—Ä–æ—Å.

üîπ **–ü—Ä–∏–º–µ—Ä:**

```sql
DO $$ 
DECLARE 
    query TEXT; 
BEGIN 
    query := 'SELECT COUNT(*) FROM users'; 
    EXECUTE query; 
END $$;
```

–ó–¥–µ—Å—å SQL-–∑–∞–ø—Ä–æ—Å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫–µ `query` –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ `EXECUTE`.

---

## **2. `EXECUTE ... USING` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**

–ß—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç `USING`:

üîπ **–ü—Ä–∏–º–µ—Ä:**

```sql
DO $$
DECLARE 
    user_count INT; 
BEGIN 
    EXECUTE 'SELECT COUNT(*) FROM users WHERE age > $1' INTO user_count USING 30;
    RAISE NOTICE '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ç–∞—Ä—à–µ 30 –ª–µ—Ç: %', user_count;
END $$;
```

üí° **–ü–æ—á–µ–º—É —Ç–∞–∫ –ª—É—á—à–µ?**

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ**: SQL-–∏–Ω—ä–µ–∫—Ü–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞.
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ**: PostgreSQL –º–æ–∂–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## **3. `FOR ... IN EXECUTE` ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –≤ —Ü–∏–∫–ª–µ**

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ **–ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ —Å—Ç—Ä–æ–∫–∞–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞**, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `FOR ... IN EXECUTE`.

üîπ **–ü—Ä–∏–º–µ—Ä:**

```sql
DO $$
DECLARE 
    row RECORD;
BEGIN 
    FOR row IN EXECUTE 'SELECT id, name FROM users' 
    LOOP 
        RAISE NOTICE 'ID: %, Name: %', row.id, row.name;
    END LOOP;
END $$;
```

üìå **–ì–¥–µ –ø–æ–ª–µ–∑–Ω–æ?**

- –ü–µ—Ä–µ–±–æ—Ä —Å—Ç—Ä–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞.
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö.

---

## **4. `OPEN CURSOR FOR EXECUTE` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –∫—É—Ä—Å–æ—Ä–∞–º–∏**

–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–∑–∂–µ, –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –∫—É—Ä—Å–æ—Ä.

üîπ **–ü—Ä–∏–º–µ—Ä:**

```sql
DO $$ 
DECLARE 
    cur REFCURSOR; 
BEGIN 
    OPEN cur FOR EXECUTE 'SELECT id, name FROM users'; 
    -- –ö—É—Ä—Å–æ—Ä –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏ –∫–æ–¥–∞ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
END $$;
```

üìå **–ì–¥–µ –ø–æ–ª–µ–∑–Ω–æ?**

- –ü–µ—Ä–µ–¥–∞—á–∞ –∫—É—Ä—Å–æ—Ä–∞ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- –ß—Ç–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

---

## **5. `RETURN QUERY EXECUTE` ‚Äî –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏**

–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –∏—Å–ø–æ–ª—å–∑—É—é—Ç `RETURN QUERY EXECUTE`.

üîπ **–ü—Ä–∏–º–µ—Ä:**

```sql
CREATE FUNCTION get_users_by_age(min_age INT) RETURNS SETOF users AS $$
BEGIN 
    RETURN QUERY EXECUTE 'SELECT * FROM users WHERE age > $1' USING min_age;
END;
$$ LANGUAGE plpgsql;
```

üìå **–ì–¥–µ –ø–æ–ª–µ–∑–Ω–æ?**

- –°–æ–∑–¥–∞–Ω–∏–µ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.
- –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## **6. –†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —Å–ø–æ—Å–æ–±–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**

|–°–ø–æ—Å–æ–±|–û–ø–∏—Å–∞–Ω–∏–µ|
|---|---|
|**`EXECUTE`**|–ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å|
|**`EXECUTE ... USING`**|–í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤|
|**`FOR ... IN EXECUTE`**|–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–±—Ä–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞|
|**`OPEN CURSOR FOR EXECUTE`**|–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫—É—Ä—Å–æ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏|
|**`RETURN QUERY EXECUTE`**|–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞|

---

## **–í—ã–≤–æ–¥**

‚úÖ **–í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–¥–∞—á–∏**:

- –ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É ‚Üí `EXECUTE`.
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí `EXECUTE ... USING`.
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–±—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ ‚Üí `FOR ... IN EXECUTE`.
- –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –∫—É—Ä—Å–æ—Ä –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ ‚Üí `OPEN CURSOR FOR EXECUTE`.
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Üí `RETURN QUERY EXECUTE`.

---

üëâ **–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å: –ü—Ä–∏–º–µ—Ä SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ—ë.** –ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å?