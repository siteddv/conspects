# Глава 16. Триггеры

## Содержание

- [[1. Введение в триггеры]] [1. Введение в триггеры](../полный/16.  Триггеры/1. Введение в триггеры.md)
- [[2. Типы триггеров]] [2. Типы триггеров](../полный/16.  Триггеры/2. Типы триггеров.md)
- [[3. Создание триггерных функций]] [3. Создание триггерных функций](../полный/16.  Триггеры/3. Создание триггерных функций.md)
- [[4. Использование OLD и NEW]] [4. Использование OLD и NEW](../полный/16.  Триггеры/4. Использование OLD и NEW.md)
- [[5. Практические примеры]] [5. Практические примеры](../полный/16.  Триггеры/5. Практические примеры.md)

---

## Введение в триггеры

Триггеры — это механизмы автоматического выполнения операций в базе данных при изменении данных. Они играют важную роль в поддержании целостности данных, автоматизации задач и выполнения бизнес-логики без необходимости изменения клиентского кода.

Триггер состоит из двух частей: самого триггера, который определяет событие, при котором он должен срабатывать, и триггерной функции, которая выполняется при срабатывании триггера.

Триггеры могут отслеживать изменения в таблицах или представлениях и реагировать на такие события, как `INSERT`, `UPDATE` и `DELETE`. Когда в базе данных выполняется одна из этих операций, система проверяет наличие соответствующего триггера. Если триггер найден, он выполняет триггерную функцию.

## Механика работы триггеров

Триггеры могут реагировать на следующие команды изменения данных (DML-операции): `INSERT` (вставка новых записей), `UPDATE` (обновление существующих записей), `DELETE` (удаление записей), `TRUNCATE` (очистка таблицы).

Триггеры могут выполняться в разные моменты: BEFORE (до операции) — срабатывает перед тем, как выполняется операция, используется для проверки данных перед их изменением, изменения данных до их вставки/обновления или отмены операции, выбросив ошибку; AFTER (после операции) — срабатывает после выполнения операции, используется для логирования, обновления связанных таблиц или других побочных эффектов.

## Триггерные функции

Триггерная функция — это специальная функция, вызываемая при срабатывании триггера. Она не принимает параметры (они определяются контекстом триггера) и возвращает специальный тип `TRIGGER`. Функция может использовать переменные `OLD` и `NEW`, содержащие данные до и после изменения.

**Подробнее:** [[16. Триггеры]] [16. Триггеры](../полный/16.  Триггеры/резюме.md)

