# Глава 12. Курсоры

## Содержание

- [[1. Введение в курсоры]] [1. Введение в курсоры](../полный/12. Курсоры/1. Введение в курсоры.md)
- [[2. Объявление и открытие курсоров]] [2. Объявление и открытие курсоров](../полный/12. Курсоры/2. Объявление и открытие курсоров.md)
- [[3. Операции с курсорами]] [3. Операции с курсорами](../полный/12. Курсоры/3. Операции с курсорами.md)
- [[4. Работа с курсорами в циклах]] [4. Работа с курсорами в циклах](../полный/12. Курсоры/4. Работа с курсорами в циклах.md)
- [[5. Обновление данных через курсор]] [5. Обновление данных через курсор](../полный/12. Курсоры/5. Обновление данных через курсор.md)
- [[6. Передача управления курсором клиенту]] [6. Передача управления курсором клиенту](../полный/12. Курсоры/6. Передача управления курсором клиенту.md)
- [[7. Практические задания и их объяснение]] [7. Практические задания и их объяснение](../полный/12. Курсоры/7. Практические задания и их объяснение.md)

---

## Введение в курсоры

Курсоры в PL/pgSQL — это специальные объекты, которые позволяют итеративно обрабатывать строки, возвращаемые SQL-запросом. Вместо того чтобы загружать весь результат запроса сразу, курсор позволяет получать данные по одной строке за раз.

Курсоры особенно полезны, когда нужно разделить большой набор данных на части, требуется выполнить сложную логику обработки, которую сложно выразить в одном SQL-запросе, необходимо передать управление выборкой клиентскому приложению.

Однако важно понимать, что курсоры не всегда являются оптимальным решением. Они требуют больше ресурсов и могут замедлить выполнение программы, если используются необдуманно. Поэтому их стоит применять только в оправданных случаях.

## Когда использовать курсоры

Курсоры полезны для обработки больших объемов данных (если выборка слишком велика, чтобы загружать её полностью в память), динамического управления количеством обработанных записей, передачи выборки клиентскому приложению и обработки данных в сложных процедурах.

Однако курсоры не нужны, если можно обработать данные обычным SQL-запросом (SQL-запросы быстрее курсоров), требуются массовые изменения данных (операции `UPDATE`, `DELETE`, `INSERT` работают эффективнее, если выполняются сразу для всего набора данных) или важна производительность.

## Объявление и открытие курсоров

Курсоры объявляются в секции `DECLARE` и открываются с помощью команды `OPEN`. После открытия курсора можно выполнять операции выборки данных через `FETCH`.

**Подробнее:** [[12. Курсоры]] [12. Курсоры](../полный/12. Курсоры/резюме.md)

