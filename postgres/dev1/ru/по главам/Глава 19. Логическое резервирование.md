# Глава 19. Логическое резервирование

## Содержание

- [[1. Введение в логическое резервное копирование]] [1. Введение в логическое резервное копирование](../полный/19. Логическое резервирование/1. Введение в логическое резервное копирование.md)
- [[2. Создание копии отдельной таблицы с помощью команды COPY]] [2. Создание копии отдельной таблицы с помощью команды COPY](../полный/19. Логическое резервирование/2. Создание копии отдельной таблицы с помощью команды COPY.md)
- [[3. Восстановление данных из резервной копии с помощью команды COPY]] [3. Восстановление данных из резервной копии с помощью команды COPY](../полный/19. Логическое резервирование/3. Восстановление данных из резервной копии с помощью команды COPY.md)
- [[4. Использование утилиты pg_dump для создания резервной копии базы данных]] [4. Использование утилиты pg_dump для создания резервной копии базы данных](../полный/19. Логическое резервирование/4. Использование утилиты pg_dump для создания резервной копии базы данных.md)
- [[5. Форматы резервных копий и их особенности]] [5. Форматы резервных копий и их особенности](../полный/19. Логическое резервирование/5. Форматы резервных копий и их особенности.md)
- [[6. Использование параллельной загрузки и выгрузки в формате directory]] [6. Использование параллельной загрузки и выгрузки в формате directory](../полный/19. Логическое резервирование/6. Использование параллельной загрузки и выгрузки в формате directory.md)
- [[7. Копирование всего кластера баз данных]] [7. Копирование всего кластера баз данных](../полный/19. Логическое резервирование/7. Копирование всего кластера баз данных.md)
- [[8. Заключение и рекомендации по использованию логического резервного копирования]] [8. Заключение и рекомендации по использованию логического резервного копирования](../полный/19. Логическое резервирование/8. Заключение и рекомендации по использованию логического резервного копирования.md)

---

## Введение в логическое резервное копирование

Логическое резервное копирование — это процесс создания резервных копий базы данных на уровне SQL-команд и структуры данных, в отличие от физического резервного копирования, которое работает на уровне файлов. Логическое резервирование позволяет создавать переносимые копии данных, которые можно восстановить на другой версии PostgreSQL или даже на другой платформе.

Основные преимущества логического резервирования: переносимость (резервные копии можно восстанавливать на разных версиях PostgreSQL и платформах), выборочное восстановление (можно восстанавливать отдельные таблицы или объекты), совместимость (формат резервных копий совместим между версиями PostgreSQL) и гибкость (можно изменять структуру данных при восстановлении).

## Создание копии отдельной таблицы с помощью команды COPY

Команда `COPY` позволяет создавать резервные копии отдельных таблиц в текстовом формате. Это простой и эффективный способ создания копий данных для небольших таблиц или для выборочного резервирования.

Команда `COPY` может экспортировать данные в различные форматы: текстовый формат (CSV), бинарный формат и другие. Это позволяет выбирать наиболее подходящий формат в зависимости от требований.

## Использование утилиты pg_dump

Утилита `pg_dump` является основным инструментом для создания логических резервных копий в PostgreSQL. Она позволяет создавать резервные копии отдельных баз данных, таблиц, схем или всего кластера.

`pg_dump` поддерживает различные форматы вывода: plain (текстовый SQL-скрипт), custom (бинарный формат с возможностью выборочного восстановления), directory (каталог с файлами для параллельной обработки) и tar (архив в формате tar).

## Форматы резервных копий и их особенности

Текстовый формат (plain) создает SQL-скрипт, который можно выполнить для восстановления базы данных. Этот формат легко читается и редактируется, но может быть медленным для больших баз данных.

Бинарный формат (custom) обеспечивает более быстрое создание и восстановление резервных копий, поддерживает сжатие и позволяет выборочно восстанавливать объекты.

Формат directory позволяет использовать параллельную обработку при создании и восстановлении резервных копий, что значительно ускоряет работу с большими базами данных.

## Копирование всего кластера баз данных

Утилита `pg_dumpall` позволяет создавать резервные копии всего кластера баз данных, включая глобальные объекты (роли, табличные пространства и т. д.). Это полезно для полного резервирования системы PostgreSQL.

**Подробнее:** [[19. Логическое резервирование]] [19. Логическое резервирование](../полный/19. Логическое резервирование/1. Введение в логическое резервное копирование.md)

