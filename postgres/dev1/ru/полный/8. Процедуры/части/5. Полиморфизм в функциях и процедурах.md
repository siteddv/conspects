### **–ü–µ—Ä–µ—Å–∫–∞–∑ 5-–π —á–∞—Å—Ç–∏: –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö PostgreSQL**

---

### **1. –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –≤ PostgreSQL?**

–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –≤ PostgreSQL –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- **–°–æ–∑–¥–∞–≤–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã**, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–µ —Ç–∏–ø—ã** (`ANYELEMENT`, `ANYARRAY`, `ANYRANGE`).
- –û–ø—Ä–µ–¥–µ–ª—è—Ç—å **—Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –≤–æ –≤—Ä–µ–º—è –≤—ã–∑–æ–≤–∞**, –∞ –Ω–µ –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏.

üìå **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º?**

- –ü–æ–∑–≤–æ–ª—è–µ—Ç **–Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö.
- –£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å **—Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π**.
- –î–∞–µ—Ç –±–æ–ª—å—à–µ –≥–∏–±–∫–æ—Å—Ç–∏ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö.

---

### **2. –ü–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–π —Ç–∏–ø `ANYELEMENT`**

–≠—Ç–æ—Ç —Ç–∏–ø –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å **–ª—é–±–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö**, –Ω–æ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞**.

üîπ **–ü—Ä–∏–º–µ—Ä —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `max_value` –¥–ª—è –ª—é–±—ã—Ö —Ç–∏–ø–æ–≤ —á–∏—Å–µ–ª:**

```sql
CREATE FUNCTION max_value(a ANYELEMENT, b ANYELEMENT) RETURNS ANYELEMENT
LANGUAGE SQL
AS $$
    SELECT CASE WHEN a > b THEN a ELSE b END;
$$;
```

üîπ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

```sql
SELECT max_value(10, 20);  -- –í–µ—Ä–Ω–µ—Ç 20 (INT)
SELECT max_value(5.5, 3.2);  -- –í–µ—Ä–Ω–µ—Ç 5.5 (REAL)
SELECT max_value('apple', 'banana');  -- –í–µ—Ä–Ω–µ—Ç 'banana' (TEXT)
```

üìå **–§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö.**

‚ö†Ô∏è **–í–∞–∂–Ω–æ!**  
–í—Å–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ **–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞**.

---

### **3. –ü–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–π —Ç–∏–ø `ANYARRAY`**

–≠—Ç–æ—Ç —Ç–∏–ø –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å **–º–∞—Å—Å–∏–≤—ã –ª—é–±–æ–≥–æ —Ç–∏–ø–∞**.

üîπ **–ü—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–π –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞:**

```sql
CREATE FUNCTION first_element(arr ANYARRAY) RETURNS ANYELEMENT
LANGUAGE SQL
AS $$
    SELECT arr[1];
$$;
```

üîπ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

```sql
SELECT first_element(ARRAY[1, 2, 3]);  -- –í–µ—Ä–Ω–µ—Ç 1 (INT)
SELECT first_element(ARRAY['a', 'b', 'c']);  -- –í–µ—Ä–Ω–µ—Ç 'a' (TEXT)
```

üìå **–§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ —Ç–∏–ø —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞.**

---

### **4. –ü–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–π —Ç–∏–ø `ANYRANGE`**

–≠—Ç–æ—Ç —Ç–∏–ø –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å **–¥–∏–∞–ø–∞–∑–æ–Ω—ã (`RANGE`) –ª—é–±–æ–≥–æ —Ç–∏–ø–∞**.

üîπ **–ü—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–π –Ω–∏–∂–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É –¥–∏–∞–ø–∞–∑–æ–Ω–∞:**

```sql
CREATE FUNCTION range_start(r ANYRANGE) RETURNS ANYELEMENT
LANGUAGE SQL
AS $$
    SELECT lower(r);
$$;
```

üîπ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

```sql
SELECT range_start(int4range(1, 10));  -- –í–µ—Ä–Ω–µ—Ç 1 (INT)
SELECT range_start(tsrange('2024-01-01', '2024-12-31'));  -- –í–µ—Ä–Ω–µ—Ç '2024-01-01' (TIMESTAMP)
```

üìå **–§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞.**

---

### **5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**

‚ùå **–ù–µ–ª—å–∑—è —Å–º–µ—à–∏–≤–∞—Ç—å —Ç–∏–ø—ã –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤**

```sql
SELECT max_value(10, 'apple');  -- –û—à–∏–±–∫–∞! –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã
```

‚ùå **–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏, –Ω–æ –≤–Ω—É—Ç—Ä–∏ –Ω–µ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–∏–º—ã –∫–æ –≤—Å–µ–º —Ç–∏–ø–∞–º**

```sql
CREATE FUNCTION add_values(a ANYELEMENT, b ANYELEMENT) RETURNS ANYELEMENT
AS $$ SELECT a + b $$;
```

üìå **–ë—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è —á–∏—Å–µ–ª, –Ω–æ –Ω–µ –¥–ª—è —Å—Ç—Ä–æ–∫ –∏–ª–∏ –¥–∞—Ç.**

---

### **6. –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –≤ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö**

–ü—Ä–æ—Ü–µ–¥—É—Ä—ã —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ANYELEMENT`, –Ω–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ñ—É–Ω–∫—Ü–∏–π:

- –û–Ω–∏ **–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é**, –∞ –∏–∑–º–µ–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ.
- `OUT` –ø–∞—Ä–∞–º–µ—Ç—Ä—ã **–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞, —á—Ç–æ –∏ `ANYELEMENT` –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞**.

üîπ **–ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Ü–µ–¥—É—Ä—ã, –∫–æ—Ç–æ—Ä–∞—è —É–¥–≤–∞–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ:**

```sql
CREATE PROCEDURE double_value(INOUT num ANYELEMENT)
LANGUAGE SQL
AS $$
    SELECT num * 2 INTO num;
$$;
```

üîπ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

```sql
CALL double_value(5);  -- num = 10 (INT)
CALL double_value(3.5);  -- num = 7.0 (REAL)
```

---

### **–í—ã–≤–æ–¥—ã –ø—è—Ç–æ–π —á–∞—Å—Ç–∏**

‚úÖ **–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º (`ANYELEMENT`, `ANYARRAY`, `ANYRANGE`) –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.**  
‚úÖ **–§—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –≤–æ –≤—Ä–µ–º—è –≤—ã–∑–æ–≤–∞.**  
‚úÖ **–ù–µ–ª—å–∑—è —Å–º–µ—à–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –≤—ã–∑–æ–≤–µ.**  
‚úÖ **–ü—Ä–æ—Ü–µ–¥—É—Ä—ã —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–µ —Ç–∏–ø—ã, –Ω–æ —Å `INOUT` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.**

---

–ì–æ—Ç–æ–≤ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ? –í **—à–µ—Å—Ç–æ–π (–ø–æ—Å–ª–µ–¥–Ω–µ–π) —á–∞—Å—Ç–∏** —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º **–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ** –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ –∏ **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏**. üöÄ

