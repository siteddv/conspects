### **–ö–æ–Ω—Å–ø–µ–∫—Ç. –ß–∞—Å—Ç—å 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤ –≤ SQL-–∑–∞–ø—Ä–æ—Å–∞—Ö**

–í —ç—Ç–æ–π —á–∞—Å—Ç–∏ —Ä–∞–∑–±–µ—Ä–µ–º, –∫–∞–∫ –º–∞—Å—Å–∏–≤—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å SQL-–∑–∞–ø—Ä–æ—Å–∞–º–∏, –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞–º–∏, —Ñ—É–Ω–∫—Ü–∏–µ–π `unnest()`, –∞ —Ç–∞–∫–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã.

---

## **1. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∞—Å—Å–∏–≤—ã**

PostgreSQL –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤—ã —Å –ø–æ–º–æ—â—å—é `ARRAY` –≤ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞—Ö.

### **1.1. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞ –≤ –º–∞—Å—Å–∏–≤**

```sql
SELECT ARRAY(SELECT id FROM users WHERE age > 25);
```

- –°–æ–∑–¥–∞–µ—Ç –º–∞—Å—Å–∏–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π `id` –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ç–∞—Ä—à–µ 25 –ª–µ—Ç.

### **1.2. –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –∏–∑ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞**

```sql
SELECT ARRAY(
    SELECT generate_series(1,5)
);
-- –í—ã–≤–µ–¥–µ—Ç {1,2,3,4,5}
```

- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–∏—Å–µ–ª –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –µ–µ –≤ –º–∞—Å—Å–∏–≤.

---

## **2. –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –≤ —Ç–∞–±–ª–∏—Ü—É (`unnest()`)**

–§—É–Ω–∫—Ü–∏—è `unnest()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ –≤ –Ω–∞–±–æ—Ä —Å—Ç—Ä–æ–∫.

### **2.1. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –≤ —Ç–∞–±–ª–∏—Ü—É**

```sql
SELECT unnest(ARRAY[10, 20, 30]);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
unnest
-------
10
20
30
```

- –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π.

### **2.2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `unnest()` —Å –¥—Ä—É–≥–∏–º–∏ —Å—Ç–æ–ª–±—Ü–∞–º–∏**

```sql
SELECT id, unnest(tags) 
FROM articles;
```

- –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã `articles` —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç –º–∞—Å—Å–∏–≤ `tags` –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫.

### **2.3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `unnest()` –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤**

```sql
SELECT unnest(ARRAY[1,2,3]), unnest(ARRAY['a','b','c']);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
unnest | unnest
----------------
1      | a
2      | b
3      | c
```

- PostgreSQL –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –º–∞—Å—Å–∏–≤—ã **–ø–æ –∏–Ω–¥–µ–∫—Å–∞–º**. –ï—Å–ª–∏ –º–∞—Å—Å–∏–≤—ã —Ä–∞–∑–Ω–æ–π –¥–ª–∏–Ω—ã, –ª–∏—à–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è.

---

## **3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤ –≤ –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö**

–ú–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å `unnest()`, –Ω–æ —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏.

### **3.1. –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –¥–≤—É–º–µ—Ä–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞**

```sql
SELECT unnest(ARRAY[[1,2,3], [4,5,6]]);
```

- –†–µ–∑—É–ª—å—Ç–∞—Ç **–Ω–µ –±—É–¥–µ—Ç –¥–≤—É–º–µ—Ä–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π**. PostgreSQL –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã:

```
unnest
-------
1
2
3
4
5
6
```

### **3.2. –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏–Ω–¥–µ–∫—Å–æ–≤ (`generate_subscripts()`)**

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `generate_subscripts()`.

```sql
SELECT generate_subscripts(ARRAY[[1,2,3], [4,5,6]], 1), 
       generate_subscripts(ARRAY[[1,2,3], [4,5,6]], 2);
```

- –ü–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `1` ‚Äì —ç—Ç–æ –∏–Ω–¥–µ–∫—Å—ã —Å—Ç—Ä–æ–∫, `2` ‚Äì –∏–Ω–¥–µ–∫—Å—ã —Å—Ç–æ–ª–±—Ü–æ–≤.

---

## **4. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤**

–ú–∞—Å—Å–∏–≤—ã –º–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –º–µ–∂–¥—É —Å–æ–±–æ–π.

### **4.1. –ü–æ–ª–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤**

```sql
SELECT ARRAY[1,2,3] = ARRAY[1,2,3];  -- TRUE
SELECT ARRAY[1,2,3] = ARRAY[1,3,2];  -- FALSE (—Ä–∞–∑–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫)
```

### **4.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –º–∞—Å—Å–∏–≤**

```sql
SELECT 2 = ANY(ARRAY[1,2,3]);  -- TRUE
SELECT 5 = ANY(ARRAY[1,2,3]);  -- FALSE
```

### **4.3. –ü—Ä–æ–≤–µ—Ä–∫–∞, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ –º–∞—Å—Å–∏–≤ –¥—Ä—É–≥–æ–π –º–∞—Å—Å–∏–≤ (`@>`)**

```sql
SELECT ARRAY[1,2,3] @> ARRAY[2,3];  -- TRUE
SELECT ARRAY[1,2,3] @> ARRAY[4];    -- FALSE
```

- `@>` –æ–∑–Ω–∞—á–∞–µ—Ç **"—Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥–º–∞—Å—Å–∏–≤"**.

### **4.4. –ü—Ä–æ–≤–µ—Ä–∫–∞, —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –ª–∏ –º–∞—Å—Å–∏–≤ –≤ –¥—Ä—É–≥–æ–º (`<@`)**

```sql
SELECT ARRAY[2,3] <@ ARRAY[1,2,3];  -- TRUE
SELECT ARRAY[4] <@ ARRAY[1,2,3];    -- FALSE
```

- `<@` –æ–∑–Ω–∞—á–∞–µ—Ç **"—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ–º"**.

### **4.5. –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤ (`&&`)**

```sql
SELECT ARRAY[1,2,3] && ARRAY[3,4,5];  -- TRUE (–æ–±—â–∏–π —ç–ª–µ–º–µ–Ω—Ç: 3)
SELECT ARRAY[1,2,3] && ARRAY[4,5,6];  -- FALSE (–Ω–µ—Ç –æ–±—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
```

---

## **5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤ –≤ —É—Å–ª–æ–≤–∏—è—Ö `WHERE`**

–ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –º–∞—Å—Å–∏–≤–∞–º.

### **5.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –º–∞—Å—Å–∏–≤–µ**

```sql
SELECT * FROM users WHERE 30 = ANY(ages);
```

- –ù–∞–π–¥–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏, –≥–¥–µ –≤ —Å—Ç–æ–ª–±—Ü–µ `ages` –µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `30`.

### **5.2. –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –º–∞—Å—Å–∏–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ –¥—Ä—É–≥–æ–≥–æ –º–∞—Å—Å–∏–≤–∞**

```sql
SELECT * FROM users WHERE ARRAY[30, 40] <@ ages;
```

- –ù–∞–π–¥–µ—Ç —Å—Ç—Ä–æ–∫–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º–∞—Å—Å–∏–≤ `ages` —Å–æ–¥–µ—Ä–∂–∏—Ç **–æ–±–∞** —ç–ª–µ–º–µ–Ω—Ç–∞ `30` –∏ `40`.

### **5.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤**

```sql
SELECT * FROM users WHERE ages && ARRAY[30, 40];
```

- –ù–∞–π–¥–µ—Ç —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ `ages` **–∏–º–µ–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω** —ç–ª–µ–º–µ–Ω—Ç –∏–∑ –º–∞—Å—Å–∏–≤–∞ `[30, 40]`.

---

## **6. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤**

### **6.1. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –≤ —Å—Ç—Ä–æ–∫—É**

```sql
SELECT array_to_string(ARRAY['apple', 'banana', 'cherry'], ', ');
-- –í—ã–≤–µ–¥–µ—Ç: "apple, banana, cherry"
```

### **6.2. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ –º–∞—Å—Å–∏–≤**

```sql
SELECT string_to_array('apple,banana,cherry', ',');
-- –í—ã–≤–µ–¥–µ—Ç: {apple, banana, cherry}
```

---

### **–í—ã–≤–æ–¥—ã**

- –ú–∞—Å—Å–∏–≤—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ SQL-–∑–∞–ø—Ä–æ—Å–∞—Ö –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
- –§—É–Ω–∫—Ü–∏—è `unnest()` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ –≤ —Ç–∞–±–ª–∏—Ü—É.
- PostgreSQL –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ—â–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏ (`ANY`, `@>`, `<@`, `&&`).
- –ú–∞—Å—Å–∏–≤—ã –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

---

üëâ –°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å –±—É–¥–µ—Ç –ø–æ—Å–≤—è—â–µ–Ω–∞ **–ø–µ—Ä–µ–±–æ—Ä—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞ –≤ —Ü–∏–∫–ª–∞—Ö** –≤ PL/pgSQL. –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º? üöÄ

