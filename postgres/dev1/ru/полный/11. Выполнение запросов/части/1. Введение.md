### **Часть 1: Введение**

#### **1. Обзор предыдущей темы**

В прошлом занятии началось изучение языка **PL/pgSQL** – процедурного языка PostgreSQL. Разбирались:

- **Управляющие конструкции**: условия (`IF`), циклы (`LOOP`, `WHILE`), обработка ошибок (`EXCEPTION`).
- **Взаимодействие с SQL**: выполнение SQL-запросов внутри PL/pgSQL.
- **Использование переменных**: объявление, присваивание, использование в запросах.
- **SQL-интеграция**: встраивание SQL в PL/pgSQL-код.

#### **2. Основная идея PL/pgSQL**

PL/pgSQL – это процедурный язык, который **тесно интегрирован с SQL**, но при этом позволяет:

- Использовать переменные и сложную логику внутри SQL-запросов.
- Выполнять **процедурный код** (в отличие от SQL, который декларативный).
- Взаимодействовать с SQL-запросами **без дополнительных оберток**, как в других языках (например, Python или Java).

PL/pgSQL **используется для создания функций и хранимых процедур**, которые работают напрямую в PostgreSQL.

#### **3. Преимущества PL/pgSQL и интеграции с PostgreSQL**

Главное преимущество PL/pgSQL – его полная совместимость с SQL, что дает:

- **Гибкость**: можно комбинировать SQL-запросы и процедурную логику.
- **Мощность**: доступ ко всем возможностям SQL, включая сложные типы данных, агрегатные функции, индексы.
- **Эффективность**: выполнение PL/pgSQL-кода внутри PostgreSQL без необходимости передачи данных на клиент.
- **Поддержка подготовленных операторов**: PostgreSQL автоматически использует **prepared statements**, оптимизируя выполнение запросов.

Но есть и **недостатки**:

- **Скорость выполнения**: из-за тесной связи с SQL функции могут быть медленнее, чем аналогичный код в низкоуровневых языках (C, Rust).
- **Ограничения**: нельзя использовать команды типа `VACUUM`, `ANALYZE`, нельзя выполнять `COMMIT`/`ROLLBACK` в функциях.

---

**Вывод:**  
PL/pgSQL – это удобный язык для процедурной логики внутри PostgreSQL, который позволяет писать SQL-запросы с переменными, контролировать выполнение и использовать мощные инструменты SQL.

---

Теперь можешь запросить пересказ **второй части**, и я продолжу максимально детально.

