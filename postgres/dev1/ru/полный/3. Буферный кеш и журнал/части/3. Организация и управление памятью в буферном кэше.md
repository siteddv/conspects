### üîπ **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –≤ –±—É—Ñ–µ—Ä–Ω–æ–º –∫—ç—à–µ**

---

#### üìå **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –∫—ç—à–∞**

–ë—É—Ñ–µ—Ä–Ω—ã–π –∫—ç—à PostgreSQL –∑–∞–Ω–∏–º–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º **`shared_buffers`**.

- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–Ω–∞—á–µ–Ω–∏–µ **`shared_buffers`** ‚Äî **128 MB**, –Ω–æ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å **25-40% –æ—Ç –≤—Å–µ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏**.
- –ï—Å–ª–∏ –∫—ç—à —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π, –¥–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–æ –±—É–¥—É—Ç –≤—ã—Ç–µ—Å–Ω—è—Ç—å—Å—è, –∏ –ø—Ä–∏–¥—ë—Ç—Å—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –¥–∏—Å–∫—É.
- –ï—Å–ª–∏ –∫—ç—à —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π, –≤–æ–∑—Ä–∞—Å—Ç–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏, –∞ —á–∞—Å—Ç—å –ø–∞–º—è—Ç–∏ –º–æ–∂–µ—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–π.

üí° **–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞**

- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å **–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º, —á—Ç–æ–±—ã —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**.
- **–ù–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á—Ä–µ–∑–º–µ—Ä–Ω–æ –±–æ–ª—å—à–∏–º**, —á—Ç–æ–±—ã –Ω–µ —Ä–∞—Å—Ö–æ–¥–æ–≤–∞—Ç—å –ø–∞–º—è—Ç—å –≤–ø—É—Å—Ç—É—é.

---

#### üìå **–ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü –∏–∑ –∫—ç—à–∞ (LRU - Least Recently Used)**

–ö–æ–≥–¥–∞ –±—É—Ñ–µ—Ä–Ω—ã–π –∫—ç—à –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è, PostgreSQL –¥–æ–ª–∂–µ–Ω **–æ—Å–≤–æ–±–æ–¥–∏—Ç—å –º–µ—Å—Ç–æ** –¥–ª—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é **–∞–ª–≥–æ—Ä–∏—Ç–º–∞ LRU (–Ω–∞–∏–º–µ–Ω–µ–µ –Ω–µ–¥–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã—Ç–µ—Å–Ω—è—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏)**.

‚öô **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç LRU –≤ PostgreSQL:**

1. –ù–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ —Å–≤–æ–±–æ–¥–Ω—ã–µ –±—É—Ñ–µ—Ä—ã.
2. –ï—Å–ª–∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ –Ω–µ—Ç, –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è **–Ω–∞–∏–º–µ–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (—Ç–∞, –∫ –∫–æ—Ç–æ—Ä–æ–π –¥–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω–µ –æ–±—Ä–∞—â–∞–ª–∏—Å—å).
3. –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ **–Ω–µ –∏–∑–º–µ–Ω—è–ª–∞—Å—å**, –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –∫—ç—à–∞.
4. –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ **–±—ã–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–∞**, –æ–Ω–∞ **–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ –¥–∏—Å–∫** –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º.

üìå **–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã LRU:**

- –£ –Ω–∞—Å –≤ –∫—ç—à–µ 100 —Å—Ç—Ä–∞–Ω–∏—Ü.
- –ß–∏—Ç–∞–µ–º –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞–Ω–Ω—ã—Ö ‚Üí —Å—Ç–∞—Ä—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤—ã—Ç–µ—Å–Ω—è—é—Ç—Å—è.
- –ï—Å–ª–∏ —Å—Ç–∞—Ä—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–Ω–æ–≤–∞ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è, –∏—Ö –ø—Ä–∏–¥–µ—Ç—Å—è **—Å–Ω–æ–≤–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å –¥–∏—Å–∫–∞**, —á—Ç–æ –∑–∞–º–µ–¥–ª–∏—Ç —Ä–∞–±–æ—Ç—É.

üí° **–í—ã–≤–æ–¥:**

- –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –∫—ç—à–µ.
- –†–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—ã—Ç–µ—Å–Ω—è—é—Ç—Å—è, —Å–Ω–∏–∂–∞—è –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø–∞–º—è—Ç—å.

---

#### üìå **–í–ª–∏—è–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫—ç—à–∞ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã**

**–ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –∫—ç—à —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π?**  
‚ùå –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —á–∞—Å—Ç–æ –≤—ã—Ç–µ—Å–Ω—è—Ç—å—Å—è.  
‚ùå –ë—É–¥–µ—Ç –±–æ–ª—å—à–µ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –¥–∏—Å–∫—É ‚Üí –º–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞.

**–ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –∫—ç—à —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π?**  
‚ùå –ü–æ–≤—ã—à–µ–Ω–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é.  
‚ùå –í–æ–∑–º–æ–∂–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–º–∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å.

üí° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—ç—à–∞** (`pg_stat_bgwriter`, `pg_stat_database`).
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å **`shared_buffers`** —Ç–∞–∫, —á—Ç–æ–±—ã –≤–º–µ—Å—Ç–∏—Ç—å **–∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ**, –Ω–æ –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å —Å–∏—Å—Ç–µ–º—É.

---

#### üìå **–ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ "—á–∏—Å—Ç—ã–µ" –∏ "–≥—Ä—è–∑–Ω—ã–µ" —Å—Ç—Ä–∞–Ω–∏—Ü—ã**

–í PostgreSQL –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –∫—ç—à–µ –¥–µ–ª—è—Ç—Å—è –Ω–∞:

- **–ß–∏—Å—Ç—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** (clean) ‚Äî –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –Ω–æ –Ω–µ –∏–∑–º–µ–Ω—è–ª–∏—Å—å. –ò—Ö –º–æ–∂–Ω–æ –≤—ã—Ç–µ—Å–Ω–∏—Ç—å –±–µ–∑ –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫.
- **–ì—Ä—è–∑–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** (dirty) ‚Äî –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ **–Ω–µ –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ –¥–∏—Å–∫**. –û–Ω–∏ **–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∞–Ω—ã –ø–µ—Ä–µ–¥ –≤—ã—Ç–µ—Å–Ω–µ–Ω–∏–µ–º**.

‚ö† **–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø—Ä–∏ —Å–±–æ–µ?**

- **–ß–∏—Å—Ç—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** ‚Üí –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, –∏—Ö –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–Ω–æ–≤–∞.
- **–ì—Ä—è–∑–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** ‚Üí –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –±—ã–ª–∏ –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ –¥–∏—Å–∫.

üìå **–†–µ—à–µ–Ω–∏–µ**

- PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∂—É—Ä–Ω–∞–ª –ø—Ä–µ–¥–∑–∞–ø–∏—Å–∏ (WAL - Write-Ahead Logging)**, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ–µ.
- WAL —Å–Ω–∞—á–∞–ª–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –≤ –±—É—Ñ–µ—Ä–Ω—ã–π –∫—ç—à, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å.

üí° **–í—ã–≤–æ–¥:**  
–ë—É—Ñ–µ—Ä–Ω—ã–π –∫—ç—à —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–º–∏ –≤ –ø–∞–º—è—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—è LRU-–≤—ã—Ç–µ—Å–Ω–µ–Ω–∏–µ –∏ —Ä–∞–∑–¥–µ–ª—è—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ —á–∏—Å—Ç—ã–µ –∏ –≥—Ä—è–∑–Ω—ã–µ. –û–¥–Ω–∞–∫–æ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WAL, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤ —Å–ª–µ–¥—É—é—â–µ–π —á–∞—Å—Ç–∏.

