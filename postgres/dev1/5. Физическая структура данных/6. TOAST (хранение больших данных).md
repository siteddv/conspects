### **üìå –ü–æ–¥—Ä–æ–±–Ω—ã–π –∫–æ–Ω—Å–ø–µ–∫—Ç —à–µ—Å—Ç–æ–π —á–∞—Å—Ç–∏: TOAST ‚Äì —Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL**

---

## **6Ô∏è‚É£ TOAST (The Oversized-Attribute Storage Technique) ‚Äì —Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL**

PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å—Ç—Ä–∞–Ω–∏—á–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö**, –≥–¥–µ –∫–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–º–µ–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä **8 KB**. –ù–æ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã **–ø—Ä–µ–≤—ã—à–∞–µ—Ç —ç—Ç–æ—Ç —Ä–∞–∑–º–µ—Ä**?  
‚Üí **–î–ª—è —ç—Ç–æ–≥–æ PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TOAST**.

---

### **üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ TOAST?**

**TOAST (The Oversized-Attribute Storage Technique)** ‚Äì —ç—Ç–æ **–º–µ—Ö–∞–Ω–∏–∑–º —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π**, –∫–æ—Ç–æ—Ä—ã–µ **–Ω–µ –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (8 KB)**.

üìå **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

1. PostgreSQL –ø—ã—Ç–∞–µ—Ç—Å—è **—É–º–µ—Å—Ç–∏—Ç—å —Å—Ç—Ä–æ–∫—É –≤ 8 KB**.
2. –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ **—Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–∞—è**, —Å–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è **—Å–∂–∞—Ç—å** –¥–∞–Ω–Ω—ã–µ (`PGLZ`-—Å–∂–∞—Ç–∏–µ).
3. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤—Å—ë –µ—â—ë **–±–æ–ª—å—à–µ 8 KB**, PostgreSQL **–≤—ã–Ω–æ—Å–∏—Ç –∏—Ö –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é TOAST-—Ç–∞–±–ª–∏—Ü—É**.
4. –í –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –æ—Å—Ç–∞—ë—Ç—Å—è **—Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ TOAST-—Ç–∞–±–ª–∏—Ü—É**.

---

### **üîπ –ö–æ–≥–¥–∞ PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TOAST?**

PostgreSQL **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç TOAST-—Ç–∞–±–ª–∏—Ü—É**, –µ—Å–ª–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –µ—Å—Ç—å —Å—Ç–æ–ª–±—Ü—ã:

- **TEXT**
- **BYTEA**
- **JSONB**
- **VARCHAR**
- **ARRAY**
- **XML**
- **HSTORE**

üí° **TOAST –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:**

- `INTEGER`
- `BIGINT`
- `BOOLEAN`
- `REAL`
- `TIMESTAMP` (–ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ **–≤—Å–µ–≥–¥–∞ —É–º–µ—â–∞—é—Ç—Å—è –≤ 8 KB**)

---

### **üîπ –ö–∞–∫ PostgreSQL —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ TOAST?**

–ö–æ–≥–¥–∞ —Å—Ç—Ä–æ–∫–∞ **—Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–∞—è**, PostgreSQL **—Ä–∞–∑–±–∏–≤–∞–µ—Ç –µ—ë –Ω–∞ —á–∞–Ω–∫–∏ (2 KB –∫–∞–∂–¥–∞—è)** –∏ —Ö—Ä–∞–Ω–∏—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π TOAST-—Ç–∞–±–ª–∏—Ü–µ.

–ü—Ä–∏–º–µ—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–æ–ª—å—à–æ–≥–æ —Ç–µ–∫—Å—Ç–∞:

```
+----------------+-----------------+
| –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ | TOAST-—Ç–∞–±–ª–∏—Ü–∞ |
+----------------+-----------------+
| ID  | TEXT     | TOAST OID       |
|---- |--------- |--------------- |
| 1   | <—Å—Å—ã–ª–∫–∞> | 16384          |
+----------------+-----------------+

+------------------+------------------+
| TOAST-—Ç–∞–±–ª–∏—Ü–∞    |                  |
+------------------+------------------+
| OID  | –ß–∞–Ω–∫ # | –î–∞–Ω–Ω—ã–µ             |
|----  |------ |------------------ |
| 16384 |  1    | "Hello "         |
| 16384 |  2    | "World!"         |
+------------------+------------------+
```

---

### **üîπ –ö–∞–∫ —É–∑–Ω–∞—Ç—å, –µ—Å—Ç—å –ª–∏ TOAST-—Ç–∞–±–ª–∏—Ü–∞ —É —Ç–∞–±–ª–∏—Ü—ã?**

–ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —É —Ç–∞–±–ª–∏—Ü—ã TOAST:

```sql
SELECT reltoastrelid FROM pg_class WHERE relname = 'my_table';
```

–ï—Å–ª–∏ **`reltoastrelid > 0`**, —É —Ç–∞–±–ª–∏—Ü—ã –µ—Å—Ç—å TOAST-—Ç–∞–±–ª–∏—Ü–∞.

üí° **–ö–∞–∫ —É–∑–Ω–∞—Ç—å –∏–º—è TOAST-—Ç–∞–±–ª–∏—Ü—ã?**

```sql
SELECT relname FROM pg_class WHERE oid = (
    SELECT reltoastrelid FROM pg_class WHERE relname = 'my_table'
);
```

---

### **üîπ –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã TOAST**

1. **–°–æ–∑–¥–∞–¥–∏–º —Ç–∞–±–ª–∏—Ü—É —Å –¥–ª–∏–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º:**
    
    ```sql
    CREATE TABLE articles (
        id SERIAL PRIMARY KEY,
        content TEXT
    );
    ```
    
2. **–î–æ–±–∞–≤–∏–º –¥–∞–Ω–Ω—ã–µ –≤ TOAST:**
    
    ```sql
    INSERT INTO articles (content) VALUES (repeat('A', 10000));
    ```
    
3. **–ü—Ä–æ–≤–µ—Ä–∏–º, —Å–æ–∑–¥–∞–ª–∞—Å—å –ª–∏ TOAST-—Ç–∞–±–ª–∏—Ü–∞:**
    
    ```sql
    SELECT relname FROM pg_class WHERE oid = (
        SELECT reltoastrelid FROM pg_class WHERE relname = 'articles'
    );
    ```
    
    ‚Üí –í—ã–≤–µ–¥–µ—Ç –∏–º—è TOAST-—Ç–∞–±–ª–∏—Ü—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä `pg_toast_16384`.
    
4. **–ü–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ TOAST:**
    
    ```sql
    SELECT * FROM pg_toast.pg_toast_16384;
    ```
    
    ‚Üí –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Ä–∞–∑–±–∏—Ç—ã –Ω–∞ —á–∞–Ω–∫–∏ (2 KB).
    

---

### **üîπ –ö–∞–∫ PostgreSQL –∑–∞–≥—Ä—É–∂–∞–µ—Ç TOAST-–¥–∞–Ω–Ω—ã–µ?**

1. **–ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –º–∞–ª–µ–Ω—å–∫–∞—è** ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã.
2. **–ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –±–æ–ª—å—à–∞—è** ‚Üí PostgreSQL –¥–µ–ª–∞–µ—Ç JOIN —Å TOAST-—Ç–∞–±–ª–∏—Ü–µ–π.
3. **–ï—Å–ª–∏ `SELECT *` –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç TOAST-—Å—Ç–æ–ª–±—Ü—ã** ‚Üí PostgreSQL –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç TOAST.

üí° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**  
–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å—É **–Ω–µ –Ω—É–∂–Ω—ã –±–æ–ª—å—à–∏–µ –ø–æ–ª—è**, –ª—É—á—à–µ –∏—Ö **–Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å**!

‚ùå **–ü–ª–æ—Ö–æ–π –ø—Ä–∏–º–µ—Ä:**

```sql
SELECT * FROM articles;
```

‚úÖ **–õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:**

```sql
SELECT id FROM articles;
```

---

### **üîπ –°–∂–∞—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ TOAST**

PostgreSQL **–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∂–∏–º–∞–µ—Ç –±–æ–ª—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è** –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ TOAST.  
–û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **PGLZ (PostgreSQL LZ)** ‚Äì –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Å–∂–∞—Ç–∏—è.

üí° **–ö–∞–∫ –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–∂–∞—Ç–∏–µ TOAST?**

```sql
ALTER TABLE articles ALTER COLUMN content SET STORAGE EXTERNAL;
```

–¢–µ–ø–µ—Ä—å PostgreSQL **–Ω–µ –±—É–¥–µ—Ç —Å–∂–∏–º–∞—Ç—å –¥–∞–Ω–Ω—ã–µ** –ø–µ—Ä–µ–¥ –∏—Ö –ø–µ—Ä–µ–Ω–æ—Å–æ–º –≤ TOAST.

---

### **üîπ –ö–∞–∫ TOAST –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å?**

|–§–∞–∫—Ç–æ—Ä|–í–ª–∏—è–Ω–∏–µ|
|---|---|
|**–ó–∞–ø—Ä–æ—Å `SELECT *`**|–ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –µ—Å–ª–∏ –µ—Å—Ç—å TOAST|
|**–ó–∞–ø—Ä–æ—Å —Å `WHERE content LIKE '%text%'`**|TOAST –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é|
|**`UPDATE` —Å—Ç—Ä–æ–∫–∏ —Å TOAST-–¥–∞–Ω–Ω—ã–º–∏**|–î—É–±–ª–∏—Ä—É–µ—Ç TOAST-–¥–∞–Ω–Ω—ã–µ, —É–≤–µ–ª–∏—á–∏–≤–∞—è —Ä–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã|
|**–°–∂–∞—Ç–∏–µ TOAST**|–≠–∫–æ–Ω–æ–º–∏—Ç –º–µ—Å—Ç–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç CPU|

---

### **üîπ –ö–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å TOAST?**

4. **–û—Ç–∫–ª—é—á–∏—Ç—å TOAST (—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ):**
    
    ```sql
    ALTER TABLE articles ALTER COLUMN content SET STORAGE PLAIN;
    ```
    
5. **–†–∞–∑—Ä–µ—à–∏—Ç—å TOAST, –Ω–æ –±–µ–∑ —Å–∂–∞—Ç–∏—è:**
    
    ```sql
    ALTER TABLE articles ALTER COLUMN content SET STORAGE EXTERNAL;
    ```
    
6. **–í–∫–ª—é—á–∏—Ç—å —Å–∂–∞—Ç–∏–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
    
    ```sql
    ALTER TABLE articles ALTER COLUMN content SET STORAGE EXTENDED;
    ```
    

---

### **üîπ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ —à–µ—Å—Ç–æ–π —á–∞—Å—Ç–∏**

- PostgreSQL **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TOAST**, –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ **–±–æ–ª—å—à–µ 8 KB**.
- –î–ª–∏–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è **—Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ —á–∞–Ω–∫–∏ (2 KB)** –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **TOAST-—Ç–∞–±–ª–∏—Ü–µ**.
- –ï—Å–ª–∏ **–∑–∞–ø—Ä–æ—Å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TOAST-–∫–æ–ª–æ–Ω–∫–∏**, PostgreSQL **–Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç TOAST** (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è!).
- PostgreSQL **–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∂–∏–º–∞–µ—Ç TOAST-–¥–∞–Ω–Ω—ã–µ** (`PGLZ`).
- –ú–æ–∂–Ω–æ **—É–ø—Ä–∞–≤–ª—è—Ç—å TOAST-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º** —Å –ø–æ–º–æ—â—å—é `STORAGE` (`PLAIN`, `EXTERNAL`, `EXTENDED`).

---

## **üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞ –¥–ª—è Obsidian**

````markdown
# TOAST (The Oversized-Attribute Storage Technique) –≤ PostgreSQL

## 6Ô∏è‚É£ –ß—Ç–æ —Ç–∞–∫–æ–µ TOAST?
- PostgreSQL –Ω–µ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ **–±–æ–ª—å—à–µ 8 KB** –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ.
- **TOAST = –º–µ—Ö–∞–Ω–∏–∑–º —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö**.
- –î–∞–Ω–Ω—ã–µ **—Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ —á–∞–Ω–∫–∏** –ø–æ **2 KB**.

## 6Ô∏è‚É£.1 –ö–∞–∫ —É–∑–Ω–∞—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏ —Ç–∞–±–ª–∏—Ü–∞ TOAST?
```sql
SELECT reltoastrelid FROM pg_class WHERE relname = 'articles';
````

## 6Ô∏è‚É£.2 –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å TOAST-–¥–∞–Ω–Ω—ã–µ?

```sql
SELECT * FROM pg_toast.pg_toast_16384;
```

## 6Ô∏è‚É£.3 –ö–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å TOAST?

- **–û—Ç–∫–ª—é—á–∏—Ç—å TOAST:**
    
    ```sql
    ALTER TABLE articles ALTER COLUMN content SET STORAGE PLAIN;
    ```
    
- **TOAST –±–µ–∑ —Å–∂–∞—Ç–∏—è:**
    
    ```sql
    ALTER TABLE articles ALTER COLUMN content SET STORAGE EXTERNAL;
    ```
    
- **TOAST —Å–æ —Å–∂–∞—Ç–∏–µ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
    
    ```sql
    ALTER TABLE articles ALTER COLUMN content SET STORAGE EXTENDED;
    ```
    

---

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ **—Å–µ–¥—å–º–æ–π —á–∞—Å—Ç–∏** ‚Äì **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ!** üöÄ