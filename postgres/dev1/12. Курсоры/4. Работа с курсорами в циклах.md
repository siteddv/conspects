### **–ü–æ–¥—Ä–æ–±–Ω—ã–π –∫–æ–Ω—Å–ø–µ–∫—Ç —á–µ—Ç–≤–µ—Ä—Ç–æ–π —á–∞—Å—Ç–∏: –†–∞–±–æ—Ç–∞ —Å –∫—É—Ä—Å–æ—Ä–∞–º–∏ –≤ —Ü–∏–∫–ª–∞—Ö**

---

### **4.1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `FOR` –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ –∫—É—Ä—Å–æ—Ä—É**

–í PL/pgSQL –º–æ–∂–Ω–æ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –∏–∑ –∫—É—Ä—Å–æ—Ä–∞** —Å –ø–æ–º–æ—â—å—é **—Ü–∏–∫–ª–∞ `FOR`**.  
–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ **–≥–æ—Ä–∞–∑–¥–æ —É–¥–æ–±–Ω–µ–µ**, —á–µ–º –≤—Ä—É—á–Ω—É—é –≤—ã–∑—ã–≤–∞—Ç—å `FETCH` –≤ `LOOP`.

üìå **–ü—Ä–∏–º–µ—Ä –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ –∫—É—Ä—Å–æ—Ä—É —Å `FOR`:**

```sql
DECLARE emp_cursor CURSOR FOR 
    SELECT id, name FROM employees WHERE department = 'IT';

DECLARE emp_record RECORD;

BEGIN
    FOR emp_record IN emp_cursor LOOP
        RAISE NOTICE 'ID: %, Name: %', emp_record.id, emp_record.name;
    END LOOP;
END;
```

üîπ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

1. **–û–±—ä—è–≤–ª—è–µ—Ç—Å—è –∫—É—Ä—Å–æ—Ä** (–º–æ–∂–Ω–æ –∏ –∑–∞—Ä–∞–Ω–µ–µ, –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
2. **–¶–∏–∫–ª `FOR` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
    - **–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫—É—Ä—Å–æ—Ä.**
    - **–ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ –ø–æ –æ–¥–Ω–æ–π (`FETCH`).**
    - **–ó–∞–∫—Ä—ã–≤–∞–µ—Ç –∫—É—Ä—Å–æ—Ä –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–∏–∫–ª–∞.**

üí° **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:**

- **–ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é** –æ—Ç–∫—Ä—ã–≤–∞—Ç—å, `FETCH`-–∏—Ç—å –∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∫—É—Ä—Å–æ—Ä.

---

### **4.2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ `FOR` –ø–æ –∫—É—Ä—Å–æ—Ä—É –∏ `FOR` –ø–æ SQL-–∑–∞–ø—Ä–æ—Å—É**

**–¶–∏–∫–ª `FOR` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—É—Ä—Å–æ—Ä–æ–≤, –Ω–æ –∏ –¥–ª—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞–ø—Ä—è–º—É—é!**

üìå **–í–º–µ—Å—Ç–æ –∫—É—Ä—Å–æ—Ä–∞ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫:**

```sql
DECLARE emp_record RECORD;

BEGIN
    FOR emp_record IN (SELECT id, name FROM employees WHERE department = 'HR') LOOP
        RAISE NOTICE 'ID: %, Name: %', emp_record.id, emp_record.name;
    END LOOP;
END;
```

üîπ **–†–∞–∑–Ω–∏—Ü–∞:**

|**–ú–µ—Ç–æ–¥**|**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**|
|---|---|
|`FOR` –ø–æ –∫—É—Ä—Å–æ—Ä—É|–ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω **–≥–∏–±–∫–∏–π –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫—É—Ä—Å–æ—Ä**|
|`FOR` –ø–æ SQL-–∑–∞–ø—Ä–æ—Å—É|–ö–æ–≥–¥–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è **—Ö—Ä–∞–Ω–∏—Ç—å –∫—É—Ä—Å–æ—Ä –æ—Ç–¥–µ–ª—å–Ω–æ**|

üí° **SQL-–∑–∞–ø—Ä–æ—Å –Ω–∞–ø—Ä—è–º—É—é –±—ã—Å—Ç—Ä–µ–µ**, –ø–æ—Ç–æ–º—É —á—Ç–æ PostgreSQL –≤—ã–ø–æ–ª–Ω—è–µ—Ç –µ–≥–æ **—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ**, —á–µ–º —á–µ—Ä–µ–∑ –∫—É—Ä—Å–æ—Ä.

---

### **4.3. –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã —Å –∫—É—Ä—Å–æ—Ä–∞–º–∏**

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫—É—Ä—Å–æ—Ä—ã**, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥–≤—É—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü.

üìå **–ü—Ä–∏–º–µ—Ä:**

```sql
DECLARE dept_cursor CURSOR FOR SELECT id, name FROM departments;
DECLARE emp_cursor CURSOR FOR SELECT id, name FROM employees WHERE department_id = dept_id;

DECLARE dept_record RECORD;
DECLARE emp_record RECORD;

BEGIN
    FOR dept_record IN dept_cursor LOOP
        RAISE NOTICE 'Department: %', dept_record.name;
        
        FOR emp_record IN emp_cursor LOOP
            RAISE NOTICE '  Employee: %', emp_record.name;
        END LOOP;
    END LOOP;
END;
```

üîπ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

1. **–ü–µ—Ä–≤—ã–π –∫—É—Ä—Å–æ—Ä (`dept_cursor`)** –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ —Ç–∞–±–ª–∏—Ü–µ `departments`.
2. –î–ª—è **–∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª–∞** –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ç–æ—Ä–æ–π –∫—É—Ä—Å–æ—Ä (`emp_cursor`), –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç **—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —ç—Ç–æ–≥–æ –æ—Ç–¥–µ–ª–∞**.
3. –í—ã–≤–æ–¥—è—Ç—Å—è **–≤—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –æ—Ç–¥–µ–ª–∞**.

üí° **–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã –ø–æ–ª–µ–∑–Ω—ã**, –Ω–æ –∏—Ö —Å—Ç–æ–∏—Ç –∏–∑–±–µ–≥–∞—Ç—å, –µ—Å–ª–∏ –∑–∞–¥–∞—á—É –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –æ–¥–Ω–∏–º SQL-–∑–∞–ø—Ä–æ—Å–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `JOIN`).

---

### **4.4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–æ–º –∏–∑ —Ü–∏–∫–ª–æ–≤ (`EXIT`, `CONTINUE`)**

–í–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞ –º–æ–∂–Ω–æ **–ø—Ä–µ—Ä—ã–≤–∞—Ç—å** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∏—Ç–µ—Ä–∞—Ü–∏–∏:

üìå **–ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —Ü–∏–∫–ª–∞ (`EXIT`)**

```sql
BEGIN
    FOR rec IN (SELECT id, name FROM employees) LOOP
        IF rec.id = 10 THEN
            EXIT;  -- –ü—Ä–µ—Ä—ã–≤–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–∏–∫–ª–∞
        END IF;
        RAISE NOTICE 'ID: %, Name: %', rec.id, rec.name;
    END LOOP;
END;
```

üìå **–ü—Ä–æ–ø—É—Å–∫ –∏—Ç–µ—Ä–∞—Ü–∏–∏ (`CONTINUE`)**

```sql
BEGIN
    FOR rec IN (SELECT id, name FROM employees) LOOP
        IF rec.id = 10 THEN
            CONTINUE;  -- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ç–µ–∫—É—â—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é
        END IF;
        RAISE NOTICE 'ID: %, Name: %', rec.id, rec.name;
    END LOOP;
END;
```

üîπ **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**

|**–ö–æ–º–∞–Ω–¥–∞**|**–î–µ–π—Å—Ç–≤–∏–µ**|**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**|
|---|---|---|
|`EXIT`|–ü–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Ü–∏–∫–ª–∞|–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ **–∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**|
|`CONTINUE`|–ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ü–∏—é –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–π|–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ **–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**|

---

### **4.5. –í—ã–≤–æ–¥ –ø–æ —á–µ—Ç–≤–µ—Ä—Ç–æ–π —á–∞—Å—Ç–∏**

- `FOR` –ø–æ –∫—É—Ä—Å–æ—Ä—É **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∫—É—Ä—Å–æ—Ä–æ–º**, —É–ø—Ä–æ—â–∞—è –∫–æ–¥.
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `FOR` **–ø–æ SQL-–∑–∞–ø—Ä–æ—Å—É**, —á—Ç–æ —á–∞—Å—Ç–æ –±—ã—Å—Ç—Ä–µ–µ.
- **–í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫—É—Ä—Å–æ—Ä—ã** –ø–æ–ª–µ–∑–Ω—ã, –Ω–æ –∏—Ö —Å—Ç–æ–∏—Ç –∏–∑–±–µ–≥–∞—Ç—å, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `JOIN`.
- `EXIT` –ø–æ–∑–≤–æ–ª—è–µ—Ç **–ø—Ä–µ—Ä–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** —Ü–∏–∫–ª–∞, –∞ `CONTINUE` **–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ü–∏—é**.

---

üëâ **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –†–∞–∑–±–∏—Ä–∞–µ–º **–ø—è—Ç—É—é —á–∞—Å—Ç—å: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –∫—É—Ä—Å–æ—Ä"**?