### **–ß–∞—Å—Ç—å 1: –í–≤–µ–¥–µ–Ω–∏–µ –≤ –æ—Ç–ª–∞–¥–∫—É –≤ PostgreSQL**

---

## **1.1 –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞?**

–û—Ç–ª–∞–¥–∫–∞ ‚Äî —ç—Ç–æ –≤–∞–∂–Ω—ã–π —ç—Ç–∞–ø —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- **–í—ã—è–≤–∏—Ç—å –æ—à–∏–±–∫–∏** –≤ –∫–æ–¥–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- **–ü–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ —Ç–∞–∫, –∫–∞–∫ –æ–∂–∏–¥–∞–ª–æ—Å—å**, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ —Å–ª–æ–∂–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–º—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö –∏ —Ñ—É–Ω–∫—Ü–∏—è—Ö.
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**, –Ω–∞—Ö–æ–¥—è —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –≤ –∫–æ–¥–µ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤.
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫–∏ –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö**, –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏.

### **–û—Ç–ª–∞–¥–∫–∞ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–∞ –≤ PL/pgSQL, –ø–æ—Ç–æ–º—É —á—Ç–æ:**

‚úÖ –ö–æ–¥ –º–æ–∂–µ—Ç **—Å–∫—Ä—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∏–∫–µ**, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.  
‚úÖ –û—à–∏–±–∫–∏ –º–æ–≥—É—Ç **–Ω–µ —Å—Ä–∞–∑—É –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ —è–≤–Ω—ã–º —Å–±–æ—è–º**, –Ω–æ –≤–ª–∏—è—Ç—å –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.  
‚úÖ PL/pgSQL **–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é**, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫, –Ω–æ –Ω–µ –∏—Å–∫–ª—é—á–∞–µ—Ç –∏—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é.

---

## **1.2 –î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫ –æ—Ç–ª–∞–¥–∫–µ**

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ –æ—Ç–ª–∞–¥–∫–∏ –∫–æ–¥–∞ –≤ PostgreSQL:

### **1. –û—Ç–ª–∞–¥—á–∏–∫ (PL/pgSQL Debugger, `pldbgapi`)**

- –ü–æ–∑–≤–æ–ª—è–µ—Ç **—Å—Ç–∞–≤–∏—Ç—å —Ç–æ—á–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è**, **–ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**, **—à–∞–≥–∞—Ç—å –ø–æ –∫–æ–¥—É**.
- –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ **—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `pldbgapi`**.
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ PgAdmin, DBeaver –∏ –¥—Ä—É–≥–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö.
- **–ì–ª–∞–≤–Ω—ã–π –ø–ª—é—Å**: —É–¥–æ–±–µ–Ω –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä.
- **–ì–ª–∞–≤–Ω—ã–π –º–∏–Ω—É—Å**: –Ω–µ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –±–æ–µ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.

### **2. –°–ª—É–∂–µ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (`RAISE NOTICE` –∏ –∞–Ω–∞–ª–æ–≥–∏)**

- –ü–æ–∑–≤–æ–ª—è—é—Ç **–≤—ã–≤–æ–¥–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é** –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π.
- –ú–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ **–∂—É—Ä–Ω–∞–ª —Å–µ—Ä–≤–µ—Ä–∞**, **—Ñ–∞–π–ª**, **—Ç–∞–±–ª–∏—Ü—É** –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ **NOTIFY/LISTEN**.
- **–ì–ª–∞–≤–Ω—ã–π –ø–ª—é—Å**: —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π.
- **–ì–ª–∞–≤–Ω—ã–π –º–∏–Ω—É—Å**: —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–¥—É–º—ã–≤–∞–Ω–∏—è –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –±–æ–µ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

---

## **1.3 –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**

üìå **–û—Ç–ª–∞–¥—á–∏–∫ `pldbgapi`**

- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∫–æ–º–∞–Ω–¥–æ–π PostgreSQL.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç **–æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ PgAdmin –∏ DBeaver.

üìå **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é `RAISE NOTICE`**

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –∫–ª–∏–µ–Ω—Ç –∏ –≤ –∂—É—Ä–Ω–∞–ª —Å–µ—Ä–≤–µ—Ä–∞.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ **–±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞–±–æ—Ç—ã –±–∞–∑—ã**.

üìå **–ñ—É—Ä–Ω–∞–ª PostgreSQL (`postgresql.log`)**

- –í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥ –ø–æ–º–æ–≥–∞–µ—Ç **–ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤**.
- –ú–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ –¥–æ–ª–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã** –∏–ª–∏ **–≤—Å–µ –ø–æ–¥—Ä—è–¥**.

üìå **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `auto_explain`**

- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–ø–ª–∞–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**, –≤–∫–ª—é—á–∞—è –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π.
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞.

üìå **`pg_stat_activity` –∏ `application_name`**

- –ü–æ–∑–≤–æ–ª—è—é—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å **—Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**.
- –ú–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä `application_name` –∏ –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –Ω–∏–º –≤ `pg_stat_activity`.

---

## **1.4 –û—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**

üõë **–û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∏–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö**

- –ù–∞–ø—Ä–∏–º–µ—Ä, —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å –Ω–æ–º–µ—Ä –ø–æ–¥—ä–µ–∑–¥–∞ –≤ –¥–æ–º–µ, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `0`.
- –ú–æ–∂–Ω–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å –ø–æ–º–æ—â—å—é `ASSERT` (–±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ –≤ **–ß–∞—Å—Ç–∏ 2**).

üõë **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

- –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–¥–∞—á–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏—é, –≥–¥–µ –æ–Ω–æ –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ.

üõë **–û—à–∏–±–∫–∞ –≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö SQL-–∑–∞–ø—Ä–æ—Å–∞—Ö**

- –ù–∞–ø—Ä–∏–º–µ—Ä, —Ñ—É–Ω–∫—Ü–∏—è **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å**, –Ω–æ –≤—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (`quote_ident`).
- –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ SQL-–∏–Ω—ä–µ–∫—Ü–∏—è–º –∏–ª–∏ –æ—à–∏–±–∫–∞–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

üõë **–î–æ–ª–≥–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä**

- –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞—Å—á–µ—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **—Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ**.
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å **–≤—ã–≤–æ–¥ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤** (–æ–± —ç—Ç–æ–º –≤ **–ß–∞—Å—Ç–∏ 5**).

üõë **–ù–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏–∑-–∑–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π**

- –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç –¥—Ä—É–≥—É—é, –∞ —Ç–∞ –µ—â–µ –æ–¥–Ω—É ‚Äî –∏ –≥–¥–µ-—Ç–æ –≤ –≥–ª—É–±–∏–Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±–æ–π.
- –≠—Ç–æ —Å–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –±–µ–∑ **—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤** (–æ–± —ç—Ç–æ–º –≤ **–ß–∞—Å—Ç–∏ 6**).

---

## **1.5 –ò—Ç–æ–≥**

- PostgreSQL –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ –æ—Ç–ª–∞–¥–∫–∏: **–æ—Ç–ª–∞–¥—á–∏–∫ `pldbgapi`** –∏ **—Å–ª—É–∂–µ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (`RAISE NOTICE` –∏ –¥—Ä.)**.
- –ú–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å **–≤ –∂—É—Ä–Ω–∞–ª —Å–µ—Ä–≤–µ—Ä–∞**, **–≤ —Ç–∞–±–ª–∏—Ü—ã**, **–≤ —Ñ–∞–π–ª—ã** –∏–ª–∏ **–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ –º–µ–∂–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ**.
- –í–∫–ª—é—á–µ–Ω–∏–µ **–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥** –∏ **—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–π—Ç–∏ –æ—à–∏–±–∫–∏ –∏ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –≤ –∫–æ–¥–µ.

---

üîú **–°–ª–µ–¥—É—é—â–∞—è —á–∞—Å—Ç—å: `ASSERT` –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞.**

–ù–∞—á–∏–Ω–∞–µ–º –≤—Ç–æ—Ä—É—é —á–∞—Å—Ç—å –∏–ª–∏ —Ö–æ—á–µ—à—å –≤–Ω–µ—Å—Ç–∏ –ø—Ä–∞–≤–∫–∏ –≤ –ø–µ—Ä–≤—É—é? üòä