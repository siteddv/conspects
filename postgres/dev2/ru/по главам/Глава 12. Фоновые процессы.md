# Глава 12. Фоновые процессы

## Содержание

- [[1. Введение в фоновые процессы PostgreSQL]] [1. Введение в фоновые процессы PostgreSQL](../полный/12. Фоновые процессы/1. Введение в фоновые процессы PostgreSQL.md)
- [[2. Механизм работы фоновых процессов]] [2. Механизм работы фоновых процессов](../полный/12. Фоновые процессы/2. Механизм работы фоновых процессов.md)
- [[3. Практическое применение фоновых процессов]] [3. Практическое применение фоновых процессов](../полный/12. Фоновые процессы/3. Практическое применение фоновых процессов.md)
- [[4. Расширение pg_background]] [4. Расширение pg_background](../полный/12. Фоновые процессы/4. Расширение pg_background.md)
- [[5. Практические задания и сравнение инструментов]] [5. Практические задания и сравнение инструментов](../полный/12. Фоновые процессы/5. Практические задания и сравнение инструментов.md)

---

## Введение в фоновые процессы PostgreSQL

Фоновые процессы в PostgreSQL представляют собой специальные служебные процессы, которые работают постоянно или запускаются при определенных условиях. Эти процессы имеют свои уникальные имена и выполняют специфические задачи, важные для работы СУБД.

Типы служебных процессов: постоянные процессы (такие как `postmaster`, `walwriter`, `autovacuum launcher` и другие, они всегда активны и обеспечивают базовые функции системы) и временные процессы (запускаются для выполнения конкретных задач и завершаются после их выполнения).

## Механизм работы фоновых процессов

PostgreSQL поддерживает динамическое создание фоновых процессов, которые могут поработать и завершиться. Эти процессы запускаются процессом `postmaster` и имеют доступ к выделенной памяти сервера и базам данных, минуя стандартные клиент-серверные протоколы.

Общее ограничение: количество фоновых процессов ограничено параметром `max_worker_processes` (по умолчанию 8). Параллельное выполнение запросов управляется параметром `max_parallel_workers_per_gather`.

## Практическое применение

Фоновые процессы используются для параллельного выполнения запросов (запрос может выполняться не только последовательно, но и параллельно, что ускоряет обработку больших объемов данных), выполнения служебных команд (например, создание индексов или выполнение команды `VACUUM` может быть распараллелено) и логической репликации (процесс, принимающий сообщения от `wal sender`, также работает как фоновый процесс).

## Расширение pg_background

Расширение `pg_background` позволяет создавать собственные фоновые процессы, которые могут выполнять длительные операции без блокировки основных процессов базы данных. Это особенно полезно для выполнения задач, которые требуют много времени, но не должны блокировать работу основной системы.

**Подробнее:** [[12. Фоновые процессы]] [12. Фоновые процессы](../полный/12. Фоновые процессы/1. Введение в фоновые процессы PostgreSQL.md)

