# Глава 5. Блокировки

## Содержание

- [[1. Введение в блокировки и их назначение]] [1. Введение в блокировки и их назначение](../полный/5. Блокировки/1. Введение в блокировки и их назначение.md)
- [[2. Блокировки объектов]] [2. Блокировки объектов](../полный/5. Блокировки/2. Блокировки объектов.md)
- [[3. Блокировки строк]] [3. Блокировки строк](../полный/5. Блокировки/3. Блокировки строк.md)
- [[4. Управление блокировками и ожиданиями]] [4. Управление блокировками и ожиданиями](../полный/5. Блокировки/4. Управление блокировками и ожиданиями.md)
- [[5. Практические аспекты и наблюдение за блокировками]] [5. Практические аспекты и наблюдение за блокировками](../полный/5. Блокировки/5. Практические аспекты и наблюдение за блокировками.md)
- [[6. Итоги и практические задания]] [6. Итоги и практические задания](../полный/5. Блокировки/6. Итоги и практические задания.md)

---

## Введение в блокировки и их назначение

Блокировки в PostgreSQL используются для управления конкурентным доступом к данным. Они обеспечивают согласованность данных при параллельном выполнении транзакций, предотвращая конфликты и обеспечивая правильный порядок выполнения операций.

PostgreSQL использует различные типы блокировок для управления конкурентным доступом к данным: блокировки на уровне строк (Row-Level Lock) блокируют только изменяемые строки, блокировки на уровне таблицы (Table-Level Lock) блокируют всю таблицу, эксклюзивные блокировки (Exclusive Lock) обеспечивают полный эксклюзивный доступ.

## Блокировки объектов

Блокировки объектов применяются к различным объектам базы данных: таблицам, индексам, схемам, базам данных и другим объектам. Эти блокировки обеспечивают согласованность при выполнении операций изменения структуры объектов (например, `ALTER TABLE`, `CREATE INDEX`).

## Блокировки строк

Блокировки строк применяются к отдельным строкам таблицы при выполнении операций `UPDATE`, `DELETE` или `SELECT ... FOR UPDATE`. MVCC снижает необходимость в блокировках для операций чтения: чтение (`SELECT`) не блокирует других пользователей, даже если кто-то обновляет данные (`UPDATE`).

## Управление блокировками и ожиданиями

PostgreSQL предоставляет различные механизмы управления блокировками: `SELECT ... FOR UPDATE` (блокирует строки для обновления), `SELECT ... FOR SHARE` (блокирует строки для чтения), `NOWAIT` (не ждать освобождения блокировки, сразу возвращать ошибку) и другие.

**Подробнее:** [[5. Блокировки]] [5. Блокировки](../полный/5. Блокировки/1. Введение в блокировки и их назначение.md)

