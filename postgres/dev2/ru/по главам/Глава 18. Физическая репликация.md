# Глава 18. Физическая репликация

## Содержание

- [[1. Введение в физическую репликацию]] [1. Введение в физическую репликацию](../полный/18. Физическая репликация/1. Введение в физическую репликацию.md)
- [[2. Технические аспекты реализации репликации]] [2. Технические аспекты реализации репликации](../полный/18. Физическая репликация/2. Технические аспекты реализации репликации.md)
- [[3. Настройка и конфигурация репликации]] [3. Настройка и конфигурация репликации](../полный/18. Физическая репликация/3. Настройка и конфигурация репликации.md)
- [[4. Работа с репликой и её возможности]] [4. Работа с репликой и её возможности](../полный/18. Физическая репликация/4. Работа с репликой и её возможности.md)
- [[5. Продвинутые темы и особенности использования]] [5. Продвинутые темы и особенности использования](../полный/18. Физическая репликация/5. Продвинутые темы и особенности использования.md)
- [[6. Переключение на реплику и аварийное восстановление]] [6. Переключение на реплику и аварийное восстановление](../полный/18. Физическая репликация/6. Переключение на реплику и аварийное восстановление.md)

---

## Введение в физическую репликацию

Физическая репликация — это процесс синхронизации нескольких кластеров баз данных, при котором один сервер (основной или мастер) передает все изменения на другой сервер (реплику). Реплика является полной копией основного сервера, и все изменения, происходящие на основном сервере, автоматически применяются к реплике.

Основные цели использования: обеспечение высокой доступности и отказоустойчивости (если основной сервер выходит из строя, можно быстро переключиться на реплику) и масштабируемость (реплика допускает подключение для выполнения читающих запросов, что позволяет распределить нагрузку по разным серверам).

## Особенности физической репликации

Однонаправленный поток данных: данные всегда передаются только от основного сервера (мастера) к резервному (реплике). Обратная передача данных невозможна.

Двоичная совместимость: реплика должна работать на той же платформе и версии PostgreSQL, что и основной сервер. Например, если основной сервер использует версию 12, то и реплика должна быть версии 12.

Полная репликация кластера: невозможно реплицировать отдельные базы данных или объекты. Репликация всегда охватывает весь кластер баз данных.

## Механизм работы

Основной сервер записывает все изменения в WAL (Write-Ahead Logging). Эти записи передаются на реплику, которая находится в режиме восстановления. Процесс `startup` на реплике постоянно применяет полученные записи, обеспечивая актуальность данных.

**Подробнее:** [[18. Физическая репликация]] [18. Физическая репликация](../полный/18. Физическая репликация/1. Введение в физическую репликацию.md)

