### Часть 6: Практические задания

#### Задания по настройке репликации
После теоретического изучения логической репликации и её особенностей, важно закрепить знания на практике. Предлагаются несколько практических заданий, которые помогут глубже понять, как настраивать и использовать логическую репликацию в реальных сценариях.

1. **Открытие второго магазина**:
   - **Задача**: Предположим, что компания открыла второй магазин, который работает независимо от основного. Однако необходимо организовать передачу данных между двумя серверами.
   - **Решение**: 
     - Настроить логическую репликацию для таблиц, содержащих данные о продажах, товарах и клиентах.
     - Убедиться, что структура таблиц на обоих серверах одинакова.
     - Создать публикацию на основном сервере и подписку на втором сервере.
     - Проверить, что данные успешно реплицируются.

2. **Синхронизация справочников книг и авторов**:
   - **Задача**: Централизованное управление справочниками книг и авторов. Необходимо, чтобы эти справочники автоматически синхронизировались между несколькими серверами.
   - **Решение**:
     - На центральном сервере создать публикацию для таблиц справочников.
     - На региональных серверах создать подписки на эти публикации.
     - Проверить, что изменения в справочниках на центральном сервере автоматически применяются на региональных серверах.
     - Убедиться, что приложение может работать с любым из серверов без потери данных.

3. **Консолидация бухгалтерских проводок**:
   - **Задача**: Есть два сервера, каждый из которых содержит данные о бухгалтерских проводках. Необходимо организовать консолидацию данных для получения сводной отчетности.
   - **Решение**:
     - На каждом сервере создать публикацию для таблиц с данными о проводках.
     - На центральном сервере создать подписки на эти публикации.
     - Настроить автоматическую начальную синхронизацию данных.
     - Проверить, что данные успешно собираются на центральном сервере и можно формировать сводные отчеты.

#### Примеры реальных кейсов
4. **Розничная сеть с несколькими магазинами**:
   - **Цель**: Централизованное управление запасами и продажами.
   - **Реализация**: Каждый магазин публикует данные о продажах, а центральный сервер подписывается на эти публикации.
   - **Преимущества**: Это позволяет получать актуальные данные из всех магазинов без необходимости постоянного ручного экспорта/импорта данных.
   - **Ограничения**: Стабильность канала связи критически важна. При обрывах связи или задержках могут возникнуть проблемы с синхронизацией.

5. **Синхронизация справочников**:
   - **Цель**: Гарантировать, что все офисы используют актуальные данные.
   - **Реализация**: Центральный сервер публикует изменения справочника, а региональные серверы подписываются на эти изменения.
   - **Преимущества**: Это гарантирует, что все офисы используют актуальные данные, что особенно важно для отчётности и аналитики.
   - **Ограничения**: Если справочники изменяются часто, это может создать нагрузку на канал связи.

#### Факультативные практики
6. **Логическая репликация внутри одного сервера**:
   - **Задача**: Настроить логическую репликацию между базами данных на одном и том же сервере.
   - **Решение**:
     - Создать две базы данных на одном сервере.
     - Настроить публикацию в одной базе данных и подписку в другой.
     - Проверить, что данные успешно реплицируются.
     - Обратить внимание на особенности настройки, такие как права доступа и совместимость версий PostgreSQL.

7. **Эксперименты с большими транзакциями**:
   - **Задача**: Исследовать влияние больших транзакций на производительность логической репликации.
   - **Решение**:
     - Создать тестовую таблицу и выполнить большую транзакцию (например, вставка миллионов записей).
     - Наблюдать за временем передачи данных на сторону подписчика.
     - Проанализировать задержки и возможные способы их уменьшения (например, разбиение транзакций на более мелкие).

---

Это завершает шестую часть конспекта. Теперь у вас есть подробный план для работы с логической репликацией в PostgreSQL, включая практические задания и примеры реальных кейсов.

