### Часть 6: Практическое применение и задачи (28:00 - конец)

#### Реальные примеры использования
- **Складской учет**:
  - Представьте, что у вас есть склад книжного магазина. На складе хранятся остатки книг, которые поступают партиями с разной ценой.
  - Задача: написать отчет, который показывает, сколько каждой книги находится на складе и какова их общая стоимость.
  - Проблема заключается в том, что книги продаются из разных партий, и цена может отличаться.

- **Метод FIFO (First In, First Out)**:
  - Один из подходов — считать, что сначала продаются самые старые партии, а затем более новые.
  - Это можно реализовать с помощью агрегатной функции, которая будет обрабатывать данные партий и вычислять остатки и стоимость.

#### Практические задания
1. **Складские остатки**:
   - **Задание**: Напишите агрегатную функцию для расчета складских остатков и их стоимости.
   - **Подсказка**: Используйте метод FIFO для определения, какие партии считаются проданными.

2. **Расширение функционала**:
   - **Задание**: Дополните расширение, которое создавало функции минимума и максимума для форматов изданий.
   - **Цель**: Добавить новые функции, которые будут работать с различными типами данных.

#### Дополнительные задачи для самостоятельного решения
1. **Банкомат**:
   - **Задача**: У банкомата есть купюры различных номиналов. Необходимо выдать заданную сумму минимальным количеством купюр.
   - **Ограничение**: Решение должно быть выполнено одним SQL-запросом.
   - **Пример**: Если нужно выдать 1230 рублей, то оптимальное решение — 1 купюра по 1000 рублей, 2 купюры по 100 рублей и 1 купюра по 50 рублей.

2. **Округление копеек**:
   - **Задача**: При распределении сумм между несколькими получателями могут возникать "потерянные" копейки.
   - **Проблема**: В российской бухгалтерии такие ошибки недопустимы.
   - **Решение**: Напишите собственную оконную функцию, которая корректно распределяет копейки между получателями.
   - **Пример**: Если нужно распределить 100 рублей между 3 получателями, то результат должен быть 33.34, 33.33, 33.33.

#### Подведение итогов
- **Расширяемость**:
  - Агрегатные и оконные функции позволяют использовать процедурный подход в сочетании с обработкой множества строк.
  - Это дает возможность создавать сложные и эффективные решения для реальных задач.

- **Практическая польза**:
  - Создание собственных функций может существенно упростить работу с данными и сделать код более читаемым и поддерживаемым.
  - Особенно это полезно в случаях, когда стандартные функции не покрывают все потребности.

---

Это завершает шестую и последнюю часть конспекта. Если у вас есть вопросы или требуется дополнительная информация по какому-либо разделу, пожалуйста, дайте знать!

