Рассматриваемые распределенные системы — это системы без разделения ресурсов (shared-nothing), где каждая машина имеет свою оперативную память и жесткий диск, а связь между ними осуществляется только через сеть. Такая архитектура широко используется в интернет-сервисах из-за своей дешевизны, отсутствия необходимости в специальном аппаратном обеспечении и возможностях облачных сервисов. Кроме того, она обеспечивает высокую надежность благодаря географической избыточности в ЦОДах. Интернет и внутренние сети ЦОДов (например, Ethernet) работают на основе асинхронных сетей пакетной передачи данных, где не гарантируется доставка сообщений. Это создает ряд проблем: запрос может быть потерян, задержан из-за перегрузки сети, или удаленный узел может временно выйти из строя. Также может случиться, что запрос обработан, но ответ потеряется при передаче. В асинхронных сетях трудно определить, почему не был получен ответ: был ли потерян запрос, не функционирует ли узел или задержан ответ. Для решения таких проблем часто устанавливается время ожидания, по истечении которого запрос считается не полученным, но все равно остается неизвестным, был ли он доставлен или не обработан.

### Сетевые сбои на практике

Компьютерные сети, несмотря на многолетний опыт их разработки, продолжают сталкиваться с проблемами, даже в контролируемых условиях. В одном из исследований в ЦОДе было зафиксировано около 12 сбоев в месяц, что включает как отключение отдельных машин, так и целых стоек. Избыточность оборудования не всегда помогает избежать сбоев, поскольку человеческий фактор, например ошибки в настройке, остаётся главной причиной перебоев. Также часто происходят кратковременные сбои в облачных сервисах, таких как EC2. Нарушения связности сети могут привести к серьезным последствиям, таким как блокировки в кластерах или потеря данных. Поэтому важно, чтобы приложения умели справляться с сетевыми сбоями, и было проведено тестирование их реакций на такие проблемы, например, с помощью утилиты Chaos Monkey.

### Обнаружение сбоев

Автоматическое обнаружение сбойных узлов необходимо в разных системах. Например, балансировщик нагрузки должен прекратить отправлять запросы на неработающие узлы, а в распределенных базах данных при сбое ведущего узла его заменяет ведомый. Однако из-за неопределенности сети сложно точно определить состояние узла.

Если машина доступна, но процесс не слушает целевой порт, ОС может закрыть TCP-соединение. В случае сбоя узла во время запроса невозможно определить, сколько данных было обработано.

Если узел сбойнул, но его ОС работает, можно оповестить другие узлы для переноса нагрузки. В некоторых случаях, например, в ЦОДах, доступ к коммутаторам позволяет узнать о сбоях сетевых подключений.

Также маршрутизаторы могут сообщить о недоступности IP через ICMP-пакет "Адресат недоступен". Однако, даже при успешной доставке TCP-пакетов приложение может не обработать запрос. В таких случаях можно повторить запрос несколько раз или ожидать истечения времени ожидания.

### Время ожидания и неограниченные задержки

