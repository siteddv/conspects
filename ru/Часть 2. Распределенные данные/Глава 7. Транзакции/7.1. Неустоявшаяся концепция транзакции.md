Транзакции поддерживаются как реляционными, так и некоторыми нереляционными СУБД. Ранние реляционные системы (например, System R) заложили основу транзакций, которая сохраняется и сегодня. В NoSQL базах транзакции ослаблены или отсутствуют, что связано с масштабируемостью. Однако мнение, что транзакции всегда мешают производительности, и что они обязательны для «ценных данных», преувеличены. Транзакции имеют свои плюсы и минусы.

### Смысл аббревиатуры ACID

Транзакции описываются аббревиатурой ACID (атомарность, согласованность, изоляция, сохраняемость), предложенной в 1983 году для обеспечения отказоустойчивости. Однако реализации ACID могут различаться, и термин стал маркетинговым. Системы, не соответствующие ACID, называют BASE, что часто означает «не ACID» и имеет расплывчатое значение.

### Атомарность

Атомарность в контексте ACID означает, что транзакция выполняется как единое целое: либо все изменения выполняются, либо при сбое они откатываются. Это предотвращает частичное выполнение операций и ошибки, такие как дублирование данных. Если транзакция не может быть завершена из-за ошибки, все её изменения отменяются. Атомарность позволяет избежать недоразумений при повторном выполнении транзакции, гарантируя, что ничего не было изменено, и изменения можно безопасно повторить.

### Согласованность

Слово «согласованность» имеет несколько значений. В контексте ACID оно означает, что данные в базе должны оставаться в допустимом состоянии, соответствующем определённым инвариантам (например, сбалансированные счета в бухгалтерии). Однако это зависит от приложения, которое формулирует и контролирует инварианты, а база данных лишь хранит данные. База не может гарантировать соблюдение этих инвариантов, только проверять их с помощью ограничений. Следовательно, согласованность в ACID — это свойство приложения, а не базы данных.

### Изоляция

Когда несколько клиентов одновременно обращаются к базе данных, может возникнуть проблема конкурентного доступа, например, при увеличении счетчика. Если два клиента одновременно читают и записывают одно и то же значение, это может привести к состоянию гонки, где результат окажется неправильным (например, счетчик увеличится на 1, а не на 2). Изоляция в контексте ACID гарантирует, что транзакции не мешают друг другу, и результат их выполнения будет таким, как если бы они выполнялись последовательно. Однако, изоляция сериализуемости, которая предоставляет наибольшую защиту, редко используется из-за проблем с производительностью. Вместо этого в некоторых СУБД, таких как Oracle, используется более слабая изоляция снимков состояния.

### Сохраняемость

Сохраняемость (durability) в СУБД — это гарантия того, что данные, записанные и успешно зафиксированные в транзакции, не будут потеряны, даже при сбое системы или аппаратного обеспечения. В одноузловых БД сохраняемость часто означает запись данных на энергонезависимый носитель, например, на жесткий диск или SSD, с использованием журнала упреждающей записи для восстановления в случае повреждения данных. В реплицируемых БД сохраняемость предполагает, что данные успешно скопированы на несколько узлов, и база ждет завершения этих операций записи или репликации перед фиксацией транзакции.

Однако абсолютная надежность невозможна. В случае полного уничтожения носителей или резервных копий БД не сможет гарантировать восстановление данных. Проблемы могут возникать и при использовании разных методов сохраняемости:

- Запись на диск защищает от поломки компьютера, но не спасает от сбоя системы, если все данные находятся только в оперативной памяти.
- Репликация может быть подвержена коррелированным сбоям, например, отключению питания, которое выведет из строя все реплики.
- В асинхронной репликации могут потеряться последние записи при внезапной недоступности ведущего узла.
- SSD могут нарушать ожидаемые гарантии, например, при отключении питания, и данные могут портиться даже на исправных дисках.

На практике для обеспечения надежности используются комбинированные методы, такие как запись на диск, репликация и резервные копии. Однако абсолютных гарантий в защите данных не существует, и к таким "гарантиям" следует относиться с осторожностью.

### Однообъектные и многообъектные операции

