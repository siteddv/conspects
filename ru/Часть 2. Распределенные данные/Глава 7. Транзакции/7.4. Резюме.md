Транзакции — это абстракция, которая позволяет приложениям избегать сложностей, связанных с конкурентным доступом и сбоями аппаратного и программного обеспечения. Основное преимущество транзакций заключается в том, что они упрощают обработку ошибок, сводя их к прерыванию транзакции и повторению её выполнения. Это критично для сложных приложений, где ошибки, такие как сбои процессов, разрывы сети, и прочие проблемы, могут привести к несогласованности данных. Например, без транзакций денормализованные данные могут быть несогласованными, а предсказать влияние таких ошибок на базу данных становится крайне сложно.

Глава подробно рассматривает проблемы конкурентного доступа, включая различные уровни изоляции транзакций и способы предотвращения ошибок. Среди них:

- **Грязные чтения**: когда транзакция читает данные, которые были записаны, но не зафиксированы другой транзакцией. Эту проблему решает изоляция уровня чтения зафиксированных данных.
- **Грязные записи**: когда одна транзакция записывает данные, которые были изменены другой транзакцией, но ещё не зафиксированы. Практически все системы предотвращают такие операции.
- **Асимметрия чтения (невоспроизводимое чтение)**: когда транзакция видит данные, измененные другими транзакциями после её чтения. Это предотвращается с помощью изоляции снимков состояния (MVCC).
- **Потерянные обновления**: когда несколько транзакций выполняют цикл чтения-изменения-записи, при этом одно изменение перезаписывает другое, игнорируя предыдущее. Изоляция снимков состояния и блокировки (например, SELECT FOR UPDATE) предотвращают эту аномалию.
- **Асимметрия записи**: когда транзакция выполняет запись на основе данных, которые изменяются в другом месте до её фиксации. Эту проблему решает только сериализуемость.
- **Фантомные чтения**: когда транзакция читает набор данных, соответствующих определенному условию, а другая транзакция изменяет набор данных, влияя на результаты поиска. Изоляция снимков состояния предотвращает фантомные чтения, но для предотвращения асимметрии записи часто требуются блокировки по диапазону значений.

Слабые уровни изоляции защищают от некоторых из этих аномалий, но другие потребуют явной блокировки на уровне приложения. Самым сильным уровнем является сериализуемость, которая предотвращает все вышеупомянутые проблемы. Рассмотрены три подхода к реализации сериализуемых транзакций:

1. **Последовательное выполнение транзакций**: эффективен при высокоскоростной обработке небольшого количества транзакций, однако его производительность ограничена одним процессорным ядром.
2. **Двухфазная блокировка**: стандартный способ обеспечения сериализуемости на протяжении десятилетий, но с плохими показателями производительности в сложных системах.
3. **Сериализуемая изоляция снимков состояния (SSI)**: современный алгоритм, использующий оптимистический подход, который позволяет выполнять транзакции без блокировок, проверяя сериализуемость только перед фиксацией. Это существенно улучшает производительность и устраняет недостатки предыдущих подходов.

Хотя примеры в главе касаются реляционной модели данных, транзакции являются полезной возможностью для баз данных любой модели. Также отмечено, что выполнение транзакций в распределённых базах данных представляет собой новые сложные задачи, которые будут рассмотрены в следующих главах.