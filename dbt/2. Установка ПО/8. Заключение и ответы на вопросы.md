# üü¢ [[–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã]]

---

### üîπ **1. –ò—Ç–æ–≥–∏ –∫—É—Ä—Å–∞ –ø–æ dbt**

#### üìå **–ß—Ç–æ –±—ã–ª–æ –∏–∑—É—á–µ–Ω–æ:**

1. üì¶ **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ dbt:**
    - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
    - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dbt –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –°–£–ë–î (PostgreSQL, ClickHouse –∏ –¥—Ä.).
2. üõ†Ô∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ `profiles.yml`:**
    - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö.
    - –•—Ä–∞–Ω–µ–Ω–∏–µ —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
3. üìä **–°–æ–∑–¥–∞–Ω–∏–µ –∏ —Å–±–æ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π:**
    - –í–∏–¥—ã –º–æ–¥–µ–ª–µ–π (`view`, `table`, `incremental`).
    - –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.
4. üõ†Ô∏è **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:**
    - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤ (`unique`, `not_null`).
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `dbt test`, `dbt build`, `dbt run`.
5. üîÑ **–ú–∞–∫—Ä–æ—Å—ã –∏ —à–∞–±–ª–æ–Ω—ã:**
    - –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞–∫—Ä–æ—Å–æ–≤ –Ω–∞ Jinja.
    - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ü–∏–∫–ª—ã –∏ —É—Å–ª–æ–≤–∏—è –≤ –º–∞–∫—Ä–æ—Å–∞—Ö.
6. üíª **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å VS Code:**
    - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤: `dbt Power User`, `SQLFluff`, `Jinja`.
    - –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ SQL-–∫–æ–¥–∞.

---

### üîπ **2. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É –∏–∑—É—á–µ–Ω–∏—é dbt**

#### üìö **1. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**

- [dbt docs](https://docs.getdbt.com/) ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –∫–µ–π—Å—ã.
- –†–∞–∑–¥–µ–ª—ã:
    - üì¶ **dbt Cloud:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è CI/CD –¥–ª—è dbt.
    - üõ†Ô∏è **–ú–∞–∫—Ä–æ—Å—ã –∏ –ø–∞–∫–µ—Ç—ã:** –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏–∏.

#### üõ†Ô∏è **2. GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:**

- üì¶ **Awesome dbt:** –°–ø–∏—Å–æ–∫ –ø–æ–ª–µ–∑–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –ø–∞–∫–µ—Ç–æ–≤.
- üîç **–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–µ–∫—Ç–æ–≤:**
    - [dbt Labs](https://github.com/dbt-labs) ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã.

---

### üîπ **3. –¢–∏–ø–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –ø–æ dbt**

#### ‚ùì **1. –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `dbt run` –∏ `dbt build`?**

- **`dbt run:`** –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—ë—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –º–æ–¥–µ–ª–∏.
- **`dbt build:`** –í—ã–ø–æ–ª–Ω—è–µ—Ç `run`, `test`, `snapshot` –∏ `docs` –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.

---

#### ‚ùì **2. –ö–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ?**

- üì¶ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `.env` —Ñ–∞–π–ª–æ–≤:**
    
    ```bash
    export DB_USER=myuser
    export DB_PASSWORD=mypassword
    ```
    
- üì¶ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    
    ```yaml
    user: "{{ env_var('DB_USER') }}"
    password: "{{ env_var('DB_PASSWORD') }}"
    ```
    

---

#### ‚ùì **3. –ö–∞–∫ –ø–∏—Å–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–µ—Å—Ç—ã?**

- üõ†Ô∏è **–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞:**
    
    ```sql
    {% test unique_id(model, column_name) %}
      select {{ column_name }}
      from {{ model }}
      group by {{ column_name }}
      having count(*) > 1
    {% endtest %}
    ```
    

---

#### ‚ùì **4. –ö–∞–∫ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å?**

- üõ†Ô∏è **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `is_incremental()`:**
    
    ```sql
    {% if is_incremental() %}
      where updated_at > (select max(updated_at) from {{ this }})
    {% endif %}
    ```
    

---

#### ‚ùì **5. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏?**

- üì¶ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ref` –∏ `source`:**
    
    ```sql
    select *
    from {{ ref('another_model') }}
    join {{ source('schema', 'table') }} on ...
    ```
    

---

### üîπ **4. –û—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ**

#### ‚ùå **–û—à–∏–±–∫–∞: `Database error: Connection refused`**

- üìå **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π —Ö–æ—Å—Ç –∏–ª–∏ –ø–æ—Ä—Ç.
- üõ†Ô∏è **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `profiles.yml` –∏ –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ.

---

#### ‚ùå **–û—à–∏–±–∫–∞: `ref` –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –º–æ–¥–µ–ª—å.**

- üìå **–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ `dbt build` –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å.
- üõ†Ô∏è **–†–µ—à–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç—å:
    
    ```bash
    dbt build
    ```
    

---

### üîπ **5. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ dbt-–ø—Ä–æ–µ–∫—Ç–æ–≤**

1. üìÇ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫–∏:**
    - `models/` ‚Äî –º–æ–¥–µ–ª–∏.
    - `snapshots/` ‚Äî —Å–Ω–∞–ø—à–æ—Ç—ã.
    - `macros/` ‚Äî –º–∞–∫—Ä–æ—Å—ã.
    - `tests/` ‚Äî —Ç–µ—Å—Ç—ã.
2. üì¶ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `incremental` –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü.**
3. üìä **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ `dbt docs generate`.**

---

### üîπ **6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è dbt —Å CI/CD**

#### üì¶ **GitHub Actions:**

- üõ†Ô∏è **–ü—Ä–∏–º–µ—Ä:**
    
    ```yaml
    name: CI for dbt
    on:
      push:
        branches: [main]
    jobs:
      build:
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v2
          - name: Install dbt
            run: pip install dbt-postgres
          - name: Run dbt build
            run: dbt build
    ```
    

---

### üîπ **7. –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ dbt**

1. üõ†Ô∏è **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `threads` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
    
    ```yaml
    threads: 4
    ```
    
2. üì¶ **–ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ `incremental` –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.**
3. üìä **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `dbt run --models +model` –¥–ª—è –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.**

---

### üîπ **8. –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã dbt**

|üõ†Ô∏è **–ö–æ–º–∞–Ω–¥–∞**|üìå **–û–ø–∏—Å–∞–Ω–∏–µ**|
|---|---|
|`dbt debug`|–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.|
|`dbt test`|–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –º–æ–¥–µ–ª–µ–π.|
|`dbt docs generate`|–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.|
|`dbt snapshot`|–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö.|
|`dbt clean`|–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.|

---

### üîπ **9. –ß—Ç–æ –∏–∑—É—á–∏—Ç—å –¥–∞–ª—å—à–µ:**

1. üì¶ **dbt Cloud:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GitHub, CI/CD –∏ API.
2. üõ†Ô∏è **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–∞–∫—Ä–æ—Å—ã –Ω–∞ Jinja.**
3. üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ dbt-–ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ Airflow –∏–ª–∏ Prefect.**

---

### üìå **–ò—Ç–æ–≥–∏ –≤–æ—Å—å–º–æ–π —á–∞—Å—Ç–∏:**

- –ü–æ–¥–≤–µ–¥–µ–Ω—ã –∏—Ç–æ–≥–∏ –∫—É—Ä—Å–∞ –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–≤–æ–¥—ã.
- –î–∞–Ω—ã –æ—Ç–≤–µ—Ç—ã –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ —Ä–µ—à–µ–Ω–∏—è —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫.
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É –∏–∑—É—á–µ–Ω–∏—é dbt.

---

üéâ **–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –∫—É—Ä—Å–∞ –ø–æ dbt!**  
–ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã, –∑–∞–¥–∞–≤–∞–π ‚Äî –æ–±—Å—É–¥–∏–º! üòä