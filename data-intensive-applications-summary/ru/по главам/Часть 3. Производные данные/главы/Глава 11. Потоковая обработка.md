# Глава 11. Потоковая обработка

Потоковая обработка выполняется непрерывно для неограниченных потоков событий, в отличие от пакетной обработки фиксированных наборов данных.

## [[11.1. Передача потоков событий]] [11.1. Передача потоков событий](../../../полный/Часть 3. Производные данные/Глава 11. Потоковая обработка/подтемы/11.1. Передача потоков событий.md)

**Два типа брокеров сообщений:**

1. **AMQP/JMS:** брокер отправляет сообщения потребителям, подтверждения удаляют сообщения. Подходит для асинхронной формы RPC, очередей задач.

2. **На основе журналирования (Kafka):** все сообщения из раздела одному потребителю в одном порядке. Параллелизм через секционирование, отслеживание прогресса через смещения. Сохранение на диске позволяет перечитывать старые сообщения.

## [[11.2. Базы данных и потоки]] [11.2. Базы данных и потоки](../../../полный/Часть 3. Производные данные/Глава 11. Потоковая обработка/подтемы/11.2. Базы данных и потоки.md)

**Представление БД в виде потоков:** фиксация истории изменений (CDC или источники событий). Уплотнение журнала позволяет потоку сохранять полную копию содержимого БД.

**Производные информационные системы:** поддержание актуальности индексов, кэшей, аналитических систем через потребление журнала изменений. Создание новых представлений для существующих данных.

## [[11.3. Обработка потоков]] [11.3. Обработка потоков](../../../полный/Часть 3. Производные данные/Глава 11. Потоковая обработка/подтемы/11.3. Обработка потоков.md)

**Применения:** поиск событий по шаблону, вычисление оконных агрегаций, поддержание производных систем в актуальном состоянии.

**Трудности с временем:** различия между временем обработки и временными метками событий, проблема событий, появляющихся после закрытия временного окна.

**Три типа объединений:**
- **Поток-поток:** оба потока — события активности, поиск связанных событий в интервале времени.
- **Поток-таблица:** один поток — события, другой — обновления таблицы. Потоковый процессор подписывается на журнал изменений.
- **Таблица-таблица:** оба потока — обновления таблиц (например, лента Twitter).

**Отказоустойчивость:** средства поддержания состояния и повторения сообщений для объединения потоков и обеспечения отказоустойчивости.

## [[11.4. Резюме]] [11.4. Резюме](../../../полный/Часть 3. Производные данные/Глава 11. Потоковая обработка/подтемы/11.4. Резюме.md)

Потоковая обработка похожа на пакетную, но выполняется непрерывно для бесконечных потоков. Брокеры на основе журналирования обеспечивают упорядоченность и возможность перечитывания. Представление БД в виде потоков открывает возможности для интеграции. Три типа объединений для различных сценариев обработки.

---

**Подробнее:** [[Глава 11. Потоковая обработка]] [Глава 11. Потоковая обработка](Глава 11. Потоковая обработка.md)

