# Глава 7. Транзакции

Транзакции группируют операции в логическую единицу: все выполняются успешно или откатываются. Упрощают обработку ошибок, но требуют затрат на производительность.

## [[7.1. Неустоявшаяся концепция транзакции]] [7.1. Неустоявшаяся концепция транзакции](../../../полный/Часть 2. Распределенные данные/Глава 7. Транзакции/подтемы/7.1. Неустоявшаяся концепция транзакции.md)

ACID: атомарность (все или ничего), согласованность (инварианты), изоляция (конкурентный доступ), сохраняемость (запись на диск). Не все БД строго следуют ACID.

## [[7.2. Слабые уровни изоляции]] [7.2. Слабые уровни изоляции](../../../полный/Часть 2. Распределенные данные/Глава 7. Транзакции/подтемы/7.2. Слабые уровни изоляции.md)

**Грязные чтения:** чтение незафиксированных данных. Решение: чтение зафиксированных данных.

**Грязные записи:** перезапись незафиксированных данных. Предотвращается блокировками.

**Невоспроизводимое чтение:** данные изменяются между чтениями. Решение: изоляция снимков состояния (MVCC).

**Потерянные обновления:** цикл чтение-изменение-запись перезаписывает изменения. Решение: блокировки (SELECT FOR UPDATE), автоматическое обнаружение.

**Фантомные чтения:** изменение набора данных между чтениями. Решение: блокировки по диапазону, индексы предикатов.

## [[7.3. Сериализуемость]] [7.3. Сериализуемость](../../../полный/Часть 2. Распределенные данные/Глава 7. Транзакции/подтемы/7.3. Сериализуемость.md)

Самый сильный уровень изоляции, предотвращает все аномалии. **Три подхода:**

1. **Последовательное выполнение:** одна транзакция за раз. Эффективно при высокой скорости, но ограничено одним ядром.

2. **Двухфазная блокировка (2PL):** блокировки для чтения и записи, строгие правила. Стандартный подход, но плохая производительность.

3. **Сериализуемая изоляция снимков состояния (SSI):** оптимистический подход, проверка сериализуемости перед фиксацией. Улучшает производительность, устраняет недостатки 2PL.

## [[7.4. Резюме]] [7.4. Резюме](../../../полный/Часть 2. Распределенные данные/Глава 7. Транзакции/подтемы/7.4. Резюме.md)

Транзакции упрощают обработку ошибок. Слабые уровни изоляции защищают от некоторых аномалий, но не от всех. Сериализуемость — самый сильный уровень, реализуется через последовательное выполнение, 2PL или SSI. SSI — современный оптимистический подход с лучшей производительностью.

---

**Подробнее:** [[Глава 7. Транзакции]] [Глава 7. Транзакции](Глава 7. Транзакции.md)

