## **üìå 4 –∫–ª—é—á–µ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ Anchor Modeling**

–í –∞–Ω–∫–æ—Ä–Ω–æ–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **—á–µ—Ç—ã—Ä–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏**, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–º–µ–Ω—è—é—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ —Ö–∞–±—ã, —Å–∞—Ç–µ–ª–ª–∏—Ç—ã –∏ –ª–∏–Ω–∫–∏ –∏–∑ Data Vault.

|üèõ **–°—É—â–Ω–æ—Å—Ç—å**|üìå **–†–æ–ª—å**|üéØ **–ê–Ω–∞–ª–æ–≥ –≤ Data Vault**|
|---|---|---|
|**–ê–Ω–∫–æ—Ä (Anchor)**|–•—Ä–∞–Ω–∏—Ç **–æ—Å–Ω–æ–≤–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å**|–•–∞–± (Hub)|
|**–ê—Ç—Ä–∏–±—É—Ç (Attribute)**|–•—Ä–∞–Ω–∏—Ç **—Å–≤–æ–π—Å—Ç–≤–∞** —Å—É—â–Ω–æ—Å—Ç–∏|–°–∞—Ç–µ–ª–ª–∏—Ç (Satellite)|
|**–°–≤—è–∑—å (Tie)**|–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –∞–Ω–∫–æ—Ä–∞–º–∏**|–õ–∏–Ω–∫ (Link)|
|**–ö–Ω–æ—Ç (Knot)**|–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏|(–ù–µ—Ç –∞–Ω–∞–ª–æ–≥–∞)|

### **1Ô∏è‚É£ –ê–Ω–∫–æ—Ä (Anchor) ‚Äì –∫–ª—é—á–µ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å**

üîπ –ê–Ω–∫–æ—Ä ‚Äì —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç **–æ–±—ä–µ–∫—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∏–µ–Ω—Ç, –ø—Ä–æ–¥—É–∫—Ç, –∑–∞–∫–∞–∑).  
üîπ **–°–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä**, –Ω–∏–∫–∞–∫–∏—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤.  
üîπ –õ—é–±–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞, –¥–∞—Ç–∞ –∑–∞–∫–∞–∑–∞) **—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∞—Ç—Ä–∏–±—É—Ç–∞—Ö**.  
üîπ **–ü—Ä–∏–º–µ—Ä:**

```sql
CREATE TABLE Customer_Anchor (
    CustomerID INT PRIMARY KEY
);
```

üí° **–í–∞–∂–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Data Vault:**  
–í Data Vault –≤ —Ö–∞–±–∞—Ö **—Ö—Ä–∞–Ω—è—Ç—Å—è –±–∏–∑–Ω–µ—Å-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã**, –∞ –≤ –∞–Ω–∫–æ—Ä–∞—Ö **–æ–Ω–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç**.

---

### **2Ô∏è‚É£ –ê—Ç—Ä–∏–±—É—Ç (Attribute) ‚Äì —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫**

üîπ –ê—Ç—Ä–∏–±—É—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç **–æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞** –∞–Ω–∫–æ—Ä–æ–≤.  
üîπ –ö–∞–∂–¥—ã–π –∞—Ç—Ä–∏–±—É—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ **–æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ**.  
üîπ –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è, **–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å**, –∞ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è.

üîπ **–ü—Ä–∏–º–µ—Ä:**

```sql
CREATE TABLE Customer_Name (
    CustomerID INT REFERENCES Customer_Anchor,
    Name VARCHAR(255),
    ValidFrom DATETIME,  
    PRIMARY KEY (CustomerID, ValidFrom)
);
```

‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:** –ú–æ–∂–Ω–æ **–ª–µ–≥–∫–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è** –∞—Ç—Ä–∏–±—É—Ç–æ–≤.  
‚ùå **–ú–∏–Ω—É—Å:** –ù—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å **–º–Ω–æ–≥–æ JOIN-–∑–∞–ø—Ä–æ—Å–æ–≤** –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

üí° **–í–∞–∂–Ω–æ:**  
–í Data Vault –∞—Ç—Ä–∏–±—É—Ç—ã –º–æ–∂–Ω–æ –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å **–∏ –∫ —Ö–∞–±–∞–º, –∏ –∫ –ª–∏–Ω–∫–∞–º**, –∞ –≤ –∞–Ω–∫–æ—Ä–µ **–∞—Ç—Ä–∏–±—É—Ç –≤—Å–µ–≥–¥–∞ —Å–≤—è–∑–∞–Ω —Ç–æ–ª—å–∫–æ —Å –∞–Ω–∫–æ—Ä–æ–º**.

---

### **3Ô∏è‚É£ –°–≤—è–∑—å (Tie) ‚Äì —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∞–Ω–∫–æ—Ä–æ–≤**

üîπ –¢–∞–π (Tie) ‚Äì —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞, –∫–æ—Ç–æ—Ä–∞—è **—Å–≤—è–∑—ã–≤–∞–µ—Ç –∞–Ω–∫–æ—Ä—ã –º–µ–∂–¥—É —Å–æ–±–æ–π**.  
üîπ –°–≤—è–∑—å –º–æ–∂–µ—Ç –±—ã—Ç—å **–æ–¥–∏–Ω-–∫-–æ–¥–Ω–æ–º—É, –æ–¥–∏–Ω-–∫–æ-–º–Ω–æ–≥–∏–º, –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º**.  
üîπ **–ü—Ä–∏–º–µ—Ä:**

- –£ –Ω–∞—Å –µ—Å—Ç—å **–∑–∞–∫–∞–∑ (Order)** –∏ **–∫–ª–∏–µ–Ω—Ç (Customer)**.
- –ù–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–≤—è–∑—å: **"–≠—Ç–æ—Ç –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —ç—Ç–æ–º—É –∫–ª–∏–µ–Ω—Ç—É"**.

üîπ **–ü—Ä–∏–º–µ—Ä:**

```sql
CREATE TABLE Order_Tie (
    OrderID INT REFERENCES Order_Anchor,
    CustomerID INT REFERENCES Customer_Anchor,
    ValidFrom DATETIME,
    PRIMARY KEY (OrderID, CustomerID, ValidFrom)
);
```

‚úÖ **–ü–ª—é—Å:** –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –º–µ–Ω—è—Ç—å —Å–≤—è–∑–∏ **–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö**.  
‚ùå **–ú–∏–Ω—É—Å:** –°–≤—è–∑–∏ –Ω—É–∂–Ω–æ **–¥–∂–æ–π–Ω–∏—Ç—å —Å –∞–Ω–∫–æ—Ä–∞–º–∏**, —á—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã.

---

### **4Ô∏è‚É£ –ö–Ω–æ—Ç (Knot) ‚Äì —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏**

üîπ **–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**.  
üîπ –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤, –∑–Ω–∞—á–µ–Ω–∏—è **–Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è** —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º.  
üîπ –ü—Ä–∏–º–µ—Ä—ã:

- **–°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ (Pending, Completed, Canceled)**
- **–ö–æ–¥—ã —Å—Ç—Ä–∞–Ω (RU, US, DE, FR)**
- **–†–µ–π—Ç–∏–Ω–≥ —Ñ–∏–ª—å–º–æ–≤ (PG, R, NC-17)**

üîπ **–ü—Ä–∏–º–µ—Ä:**

```sql
CREATE TABLE Status_Knot (
    StatusID INT PRIMARY KEY,
    StatusName VARCHAR(50)
);
```

üîπ **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Knots:**

- –£ –Ω–∞—Å –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ **Order_Status**, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞.
- –í–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏ ("Pending") –æ–Ω–∞ **—Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –∫–Ω–æ—Ç**, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã.

```sql
CREATE TABLE Order_Status (
    OrderID INT REFERENCES Order_Anchor,
    StatusID INT REFERENCES Status_Knot,
    ValidFrom DATETIME,
    PRIMARY KEY (OrderID, StatusID, ValidFrom)
);
```

‚úÖ **–ü–ª—é—Å:**

- –£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å–æ **—Å–ø—Ä–∞–≤–æ—á–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏**.
- –≠–∫–æ–Ω–æ–º–∏—Ç –º–µ—Å—Ç–æ –≤ –ë–î (–Ω–µ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫–∏, —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏).

‚ùå **–ú–∏–Ω—É—Å:**

- –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–∏–¥–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π **JOIN**.

---

## **üìå –í–∑–∞–∏–º–æ—Å–≤—è–∑—å —Å—É—â–Ω–æ—Å—Ç–µ–π**

üìå –í –∞–Ω–∫–æ—Ä–Ω–æ–π –º–æ–¥–µ–ª–∏ **–≤—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –∞–Ω–∫–æ—Ä–∞–º, –∞ —Å–≤—è–∑–∏ ‚Äì –∫ –¥—Ä—É–≥–∏–º –∞–Ω–∫–æ—Ä–∞–º**.

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≤ –∞–Ω–∫–æ—Ä–Ω–æ–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–∏:

```
[üî¥ Customer_Anchor]  
    ‚îú‚îÄ‚îÄ [üîµ Customer_Name]  
    ‚îú‚îÄ‚îÄ [üîµ Customer_Age]  
    ‚îú‚îÄ‚îÄ [üîµ Customer_Email]  
    ‚îú‚îÄ‚îÄ [üü¢ Order_Tie]  
    ‚îÇ      ‚îú‚îÄ‚îÄ [üî¥ Order_Anchor]  
    ‚îÇ            ‚îú‚îÄ‚îÄ [üîµ Order_Date]  
    ‚îÇ            ‚îú‚îÄ‚îÄ [üü¢ Order_Status ‚Üí Status_Knot]  
```

üìå **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**

- –ö–ª–∏–µ–Ω—Ç **Customer_Anchor** ‚Üí –µ–≥–æ –∏–º—è **Customer_Name** (–º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º).
- –ö–ª–∏–µ–Ω—Ç —Å–¥–µ–ª–∞–ª –∑–∞–∫–∞–∑ **Order_Anchor**, –∫–æ—Ç–æ—Ä—ã–π —Å–≤—è–∑–∞–Ω —Å **Customer_Anchor** —á–µ—Ä–µ–∑ **Order_Tie**.
- –£ –∑–∞–∫–∞–∑–∞ –µ—Å—Ç—å **Order_Status**, –∫–æ—Ç–æ—Ä—ã–π —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ **Status_Knot**.

---

## **üìå –û—Ç–ª–∏—á–∏–µ –æ—Ç —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π**

|üíæ **–†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å (3NF)**|üîó **Anchor Modeling**|
|---|---|
|–í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ **–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ**|–î–∞–Ω–Ω—ã–µ **—Ä–∞–∑–±–∏—Ç—ã –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã**|
|–ò–∑–º–µ–Ω–µ–Ω–∏—è **–ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ**|–ò–∑–º–µ–Ω–µ–Ω–∏—è **—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏**|
|**–°–ª–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é**|**–ò—Å—Ç–æ—Ä–∏—á–Ω–æ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–∞**|
|**–î–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏|**–ù–∏—á–µ–≥–æ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è, —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è**|

---

## **üìå –ò—Ç–æ–≥: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∫–æ—Ä–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ?**

‚úÖ **–ê–Ω–∫–æ—Ä** (Anchor) ‚Äì —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª–∏–µ–Ω—Ç, –∑–∞–∫–∞–∑, –ø—Ä–æ–¥—É–∫—Ç).  
‚úÖ **–ê—Ç—Ä–∏–±—É—Ç** (Attribute) ‚Äì —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ –∞–Ω–∫–æ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–º—è, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞).  
‚úÖ **–°–≤—è–∑—å** (Tie) ‚Äì —Å–æ–µ–¥–∏–Ω—è–µ—Ç –∞–Ω–∫–æ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—ç—Ç–æ—Ç –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —ç—Ç–æ–º—É –∫–ª–∏–µ–Ω—Ç—É").  
‚úÖ **–ö–Ω–æ—Ç** (Knot) ‚Äì —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–∑–∞–≤–µ—Ä—à–µ–Ω", "–æ–∂–∏–¥–∞–Ω–∏–µ").

üîπ **–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ** ‚Äì –≥–∏–±–∫–æ—Å—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ **–≤—Å–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π** –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.  
üîπ **–ì–ª–∞–≤–Ω—ã–π –º–∏–Ω—É—Å** ‚Äì –º–Ω–æ–≥–æ –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü, –∫–æ—Ç–æ—Ä—ã–µ **–Ω—É–∂–Ω–æ —Å–æ–µ–¥–∏–Ω—è—Ç—å –¥–∂–æ–π–Ω–∞–º–∏**.