## **1. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é –≤–∏—Ç—Ä–∏–Ω –¥–∞–Ω–Ω—ã—Ö**

### **1.1. –ó–≤–µ–∑–¥–Ω–∞—è —Å—Ö–µ–º–∞ (Star Schema)**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

- 4 —Ç–∞–±–ª–∏—Ü—ã —Ñ–∞–∫—Ç–æ–≤ (**FactVisits, FactBrowserVisits, FactPageViews, FactAuthAttempts**).
- 10 —Ç–∞–±–ª–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏–π (**DimDate, DimUser, DimUTMSource, DimUTMMedium, DimDeviceType, DimOS, DimBrowser, DimPage, DimReferer**).
- –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ –∏–¥—É—Ç —á–µ—Ä–µ–∑ **–≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏**.

**–ü–ª—é—Å—ã:** ‚úîÔ∏è –ì–∏–±–∫–æ—Å—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ ‚Äì –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –æ—Ç—á—ë—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏–π.  
‚úîÔ∏è –û–±–ª–µ–≥—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏.  
‚úîÔ∏è –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º.

**–ú–∏–Ω—É—Å—ã:** ‚ùå –ú–µ–¥–ª–µ–Ω–Ω—ã–µ JOIN-–æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ ClickHouse ‚Äì –º–æ–∂–µ—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å –¥–∞—à–±–æ—Ä–¥—ã –≤ Power BI.  
‚ùå –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ —Å–ª–æ–∂–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤.

---

### **1.2. –ü–ª–æ—Å–∫–∞—è –≤–∏—Ç—Ä–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö (Data Mart)**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

- 1 –±–æ–ª—å—à–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å **–≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏** (–≤–∏–∑–∏—Ç—ã, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∏—Å—Ç–æ—á–Ω–∏–∫–∏, —Å–æ–±—ã—Ç–∏—è –∏ —Ç.–¥.).
- –í–º–µ—Å—Ç–æ —Å–≤—è–∑–µ–π (JOIN) –¥–∞–Ω–Ω—ã–µ –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã.

**–ü–ª—é—Å—ã:** ‚úîÔ∏è –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã ‚Äì Power BI –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å—ë –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π.  
‚úîÔ∏è –ù–µ—Ç JOIN-–æ–ø–µ—Ä–∞—Ü–∏–π, —á—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è ClickHouse.  
‚úîÔ∏è –ü—Ä–æ—â–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç—ã.

**–ú–∏–Ω—É—Å—ã:** ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Äì –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –æ–±—ä—ë–º —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.  
‚ùå –ü–æ—Ç–µ—Ä—è –≥–∏–±–∫–æ—Å—Ç–∏ ‚Äì –Ω–µ–ª—å–∑—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö.  
‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–≥–∏–∫–µ —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –≤—Å–µ–π —Ç–∞–±–ª–∏—Ü—ã.

---

## **2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**

### **2.1. –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–æ–ª–≥–∏—Ö –ø–µ—Ä–µ—Å—á—ë—Ç–æ–≤ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç **Materialized Views (–º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è)**:

- –î–∞–Ω–Ω—ã–µ –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ ClickHouse.
- –£–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Power BI.
- –ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.

**–ü—Ä–∏–º–µ—Ä:**

```sql
CREATE MATERIALIZED VIEW mv_fact_visits
ENGINE = MergeTree()
AS SELECT
    Date,
    UserID,
    DeviceType,
    OS,
    Browser,
    COUNT(*) AS Visits,
    SUM(PageViews) AS TotalPageViews
FROM FactVisits
GROUP BY Date, UserID, DeviceType, OS, Browser;
```

### **2.2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è**

- –î—É–±–ª–∏—Ä—É–µ–º **–∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏** (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–∑–∏—Ç–æ–≤, —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è, –≥–ª—É–±–∏–Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞) –ø—Ä—è–º–æ –≤ –∏–∑–º–µ—Ä–µ–Ω–∏—è—Ö.
- Power BI –º–µ–Ω—å—à–µ –¥–µ–ª–∞–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫ –∏ –±—ã—Å—Ç—Ä–µ–µ —Å—Ç—Ä–æ–∏—Ç –æ—Ç—á—ë—Ç—ã.

---

## **3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ Power BI**

### **3.1. –†–∞–∑–Ω–∏—Ü–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ –∑–≤–µ–∑–¥–Ω–æ–π —Å—Ö–µ–º–µ –∏ Data Mart**

- –í **–∑–≤–µ–∑–¥–Ω–æ–π —Å—Ö–µ–º–µ** —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏.
- –í **–ø–ª–æ—Å–∫–æ–π –≤–∏—Ç—Ä–∏–Ω–µ** —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ JOIN-–æ–≤, –Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∑–∞–≥—Ä—É–∂–∞—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö.

### **3.2. –ö–∞–∫ —É–ª—É—á—à–∏—Ç—å —Ä–∞–±–æ—Ç—É —Ñ–∏–ª—å—Ç—Ä–æ–≤**

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
- –£–º–µ–Ω—å—à–∏—Ç—å –≥–ª—É–±–∏–Ω—É —Ö—Ä–∞–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∑–∞ 2 –≥–æ–¥–∞).
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∏ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.

---

## **4. –ò—Ç–æ–≥–æ–≤—ã–π –≤—ã–±–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

üîπ **–ï—Å–ª–∏ –≤–∞–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å** ‚Üí –∑–≤–µ–∑–¥–Ω–∞—è —Å—Ö–µ–º–∞.  
üîπ **–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** ‚Üí –ø–ª–æ—Å–∫–∞—è –≤–∏—Ç—Ä–∏–Ω–∞.  
üîπ **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥** ‚Üí —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ, —á–∞—Å—Ç—å –æ—Å—Ç–∞–≤–ª—è—Ç—å –≤ –∑–≤–µ–∑–¥–Ω–æ–π —Å—Ö–µ–º–µ.