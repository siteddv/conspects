### **1. Ключевые фильтры, необходимые для дашборда**

При проектировании модели данных учитываем основные параметры, которые понадобятся для построения отчетов:

- **Дата** (выбор периода).
- **Тип пользователя** (новый или старый).
- **UTM-метки** (источник трафика).
- **Тип устройства** (мобильный, ПК, планшет).
- **Операционная система**.
- **Браузер**.
- **Источник перехода** (реферальный сайт, рекламный канал).

---

### **2. Определение гранулярности хранилища**

- Данные можно хранить **в максимальной детализации** (каждый визит и каждое событие), но это приведет к **слишком большому объему данных**.
- Альтернативный вариант – **агрегировать данные** по дням и ключевым параметрам:
    - Например, вместо хранения всех сессий отдельно, можно сохранять **количество визитов в день** по каждому источнику.
    - Это позволит **ускорить построение отчетов** в Power BI и снизить нагрузку на базу.

---

### **3. Формирование таблиц измерений (Dimension Tables)**

В основе хранилища лежат **измерения** (dimension tables), которые описывают объекты анализа:

- **DimDate** – даты (день, неделя, месяц, год).
- **DimUser** – новый или старый пользователь.
- **DimUTMSource, DimUTMMedium** – источник трафика.
- **DimDeviceType** – тип устройства.
- **DimOS** – операционная система.
- **DimBrowser** – браузер пользователя.
- **DimPage** – просмотренные страницы.
- **DimReferer** – реферальные источники (сайты, с которых пришли пользователи).

Все эти таблицы будут **связаны с таблицами фактов** (Fact Tables) через ключи.