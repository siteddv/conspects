## 1.1. Контекст занятия
- **Общая тема курса**: моделирование хранилищ данных по методологии Кимбала (Kimball).  
- **Предыдущие уроки**: уже была сделана инкрементальная загрузка измерений — например, `dim_inventory` (компакт-диски) и `dim_staff` (сотрудники).  
- **Дата**: по словам преподавателя, «сегодня 14 августа 2002 года» (но это условная дата примера).

## 1.2. Задачи текущего занятия
1. **Изучить историчность измерений (SCD2)**:  
   - Понять, зачем нужно хранить несколько версий одной и той же сущности (например, компакт-диск в разное время с разными фильмами).  
   - Познакомиться с концепцией *Slow Changing Dimensions* в хранилищах.
2. **Продолжить работу над DWH**:  
   - После инкрементальной загрузки нужно теперь дополнить измерения механизмом историзации.  
   - Увидеть, как это влияет на построение запросов и факт-таблиц.
3. **Объяснить, почему сделаем это до инкрементальной загрузки фактов**:  
   - Изначально планировалось сразу перейти к инкрементальной загрузке факт-таблиц.  
   - Однако без учёта исторических изменений в измерениях могут возникнуть ошибки в аналитике (например, неверные связи между фактами и измерениями).  
   - Поэтому решили сначала внедрить SCD2 для измерений.

## 1.3. Краткое содержание урока
- **Теоретическая часть**: объяснение, что такое историчность измерений, какие бывают типы SCD (Slow Changing Dimension), в частности SCD2.  
- **Практическая часть**: демонстрация на примере таблицы `dim_inventory` (аналогично будет с `dim_staff`):
  1. Как добавить новые поля (`effective_date_from`, `effective_date_to`, `is_active`) для учёта времени действия записей.  
  2. Как переписать процедуру загрузки: теперь при изменении или удалении записей в источнике не «затираем» старую версию, а **закрываем** её и **добавляем** новую.  
  3. Тестирование логики на реальных примерах: смена фильма на диске, удаление диска, добавление нового.

## 1.4. Почему историчность важна для бизнеса
- **Пример из проката**: если на одном и том же диске в разные периоды были разные фильмы, нужно корректно считать доход по каждому фильму, а не смешивать их.  
- **Общая потребность аналитики**: часто спрашивают «сколько продавали до изменения параметров?» и «сколько после?»  
- **Отличие от оперативных баз**: в обычной базе данных магазина/проката сведения зачастую просто обновляют без сохранения старых версий.

## 1.5. Связь с предыдущими и будущими темами
- **Инкрементальная загрузка измерений**: уже умеем подгружать только изменённые и новые записи. Теперь будем дополнительно учитывать *историю* изменений.  
- **Факт-таблицы**: в следующих уроках рассмотрят инкрементальную загрузку фактов; для этого важно, чтобы ссылки (FK) на измерения указывали на правильную «версию» измерения (актуальную на тот момент).  
- **Развитие DWH**: историчность измерений — ключевая особенность хранилищ, позволяющая строить полноценную аналитику во времени.

---

### Краткий итог раздела
В первой части урока преподаватель представил тему занятия — **Slow Changing Dimensions** — и объяснил, почему прежде чем приступить к усложнению загрузки факт-таблиц, необходимо научиться **сохранять историю изменений** в измерениях. Это позволяет корректно формировать отчёты, в которых важно видеть, как менялись атрибуты (например, фильм на диске) в различные периоды.  
