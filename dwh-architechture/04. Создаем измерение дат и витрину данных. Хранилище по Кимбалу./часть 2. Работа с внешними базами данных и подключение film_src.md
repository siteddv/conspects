### **1. Подключение к внешней базе данных через схему `public`**

В проекте используется база данных PostgreSQL, в которой есть две основные схемы:

- **`public`** – схема в базе-источнике, содержащая реальные данные.
- **`film_src`** – псевдоним (foreign table) для схемы `public`, используемый для подключения к внешней базе данных.

### **2. `film_src` как псевдоним для удаленной базы данных**

- `film_src` – это не отдельная база, а **проксирующая схема**, которая отображает данные из другой базы (например, источника `postgres`).
- Подключение осуществляется через механизм **foreign data wrapper (FDW)**, который позволяет обращаться к удаленным таблицам как к локальным.
- Запрос `SELECT * FROM film_src.rental;` фактически обращается к `public.rental` в удаленной базе.

### **3. Взаимосвязь схем `public`, `staging` и `core`**

В системе используется многослойная архитектура хранения данных:

- **Слой источника (`public`)** – сырые данные, поступающие из приложения.
- **Промежуточный слой (`staging`)** – временное хранилище, где данные подготавливаются для основного хранилища.
- **Финальный слой (`core`)** – агрегированные и нормализованные данные, используемые в аналитике.

### **4. Ошибки при создании таблиц в `film_src`**

При попытке создать таблицу в `film_src` возникли проблемы:

- Таблица создавалась **как реальная** в `film_src`, а не как ссылка на `public`.
- В отличие от других таблиц, которые автоматически получали данные из `public`, созданная вручную таблица в `film_src` не отображалась в `public`.
- Было обнаружено, что в `film_src` хранятся не ссылки, а **реальные данные**, что привело к путанице.

### **5. Оптимизация работы с `film_src`**

Чтобы корректно работать с `film_src`:

- Не создавать новые таблицы вручную, а только использовать уже существующие из `public`.
- Проверять, какие таблицы `film_src` являются **внешними ссылками**, а какие – локальными.
- Использовать FDW для получения данных, но не для их изменения.